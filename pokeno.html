<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pokeno Card Caller — ProjectorFirst</title>
  <meta name="description" content="Projector-friendly Pokeno card caller for activities." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="icon" href="/logo.svg" type="image/svg+xml" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card-face {
      width: 90vw;            /* Almost full screen width */
      max-width: 600px;       /* Cap for very large screens */
      aspect-ratio: 3/4;      /* Maintain card shape */
      border-radius: 1rem;
      background: white;
      color: black;
      box-shadow: 0 15px 40px rgba(0,0,0,.5);
      display: grid;
      grid-template-rows: 1fr auto 1fr;
      align-items: center;
      justify-items: center;
      padding: 1rem;
    }
    .rank-big   { font-size: 10rem; line-height: .9; font-weight: 800; }
    .suit-big   { font-size: 7rem; line-height: 1; }
    .corner     { font-size: 2rem; font-weight: 800; }
    .red        { color: #ef4444; }
    .black      { color: #111827; }
    .history-pill {
      border-radius: .5rem; padding: .35rem .55rem;
      border: 1px solid rgba(255,255,255,.2);
      font-weight: 700;
    }
  </style>
</head>
<body class="bg-gradient-to-b from-emerald-900 via-gray-900 to-black text-white font-sans">
  <header class="bg-gray-800 py-4 shadow-md">
    <div class="max-w-5xl mx-auto px-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-green-400">ProjectorFirst</h1>
      <nav class="space-x-4">
        <a href="/" class="px-3 py-2 rounded hover:bg-green-400 hover:text-gray-900 transition">Home</a>
        <a href="/about.html" class="px-3 py-2 rounded hover:bg-green-400 hover:text-gray-900 transition">About</a>
        <a href="/contact.html" class="px-3 py-2 rounded hover:bg-green-400 hover:text-gray-900 transition">Contact</a>
        <a href="/apps.html" class="px-3 py-2 rounded hover:bg-green-400 hover:text-gray-900 transition">Apps</a>
      </nav>
    </div>
  </header>

  <main class="max-w-5xl mx-auto p-6 text-center">
    <h2 class="text-4xl font-extrabold mb-6 text-green-300">Pokeno Card Caller</h2>

    <div class="flex justify-center mb-8">
      <div id="card" class="card-face">
        <div id="cornerTop" class="corner black">A♠</div>
        <div id="rank" class="rank-big black">A</div>
        <div id="suit" class="suit-big black">♠</div>
      </div>
    </div>

    <div class="flex justify-center gap-4 flex-wrap mb-10">
      <button onclick="nextCard()"  class="bg-green-400 text-gray-900 px-8 py-4 text-xl rounded-lg font-bold shadow hover:bg-green-300 transition">Next Card</button>
      <button onclick="resetDeck()" class="bg-red-400 text-gray-900 px-8 py-4 text-xl rounded-lg font-bold shadow hover:bg-red-300 transition">Reset</button>
      <button onclick="toggleFullScreen()" class="bg-blue-400 text-gray-900 px-8 py-4 text-xl rounded-lg font-bold shadow hover:bg-blue-300 transition">Full Screen</button>
    </div>

    <h3 class="text-xl font-bold text-green-400 mb-3">Called Cards</h3>
    <div id="history" class="flex flex-wrap justify-center gap-2 text-lg"></div>
  </main>

  <footer class="bg-gray-800 py-4 mt-12 text-center text-gray-400 text-sm">
    © <span id="year"></span> ProjectorFirst. All rights reserved.
  </footer>

  <audio id="ding" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const RANKS = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
    const SUITS = [
      { sym:"♠", name:"spades",   color:"black" },
      { sym:"♥", name:"hearts",   color:"red"   },
      { sym:"♦", name:"diamonds", color:"red"   },
      { sym:"♣", name:"clubs",    color:"black" }
    ];

    let deck = [];
    let called = [];

    function buildDeck(){
      deck = [];
      for (const s of SUITS){
        for (const r of RANKS){
          deck.push({ rank:r, suit:s.sym, color:s.color, label:`${r}${s.sym}` });
        }
      }
    }

    function shuffle(arr){
      for (let i = arr.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
    }

    function playSound(){
      const ding = document.getElementById('ding');
      ding.currentTime = 0;
      ding.play();
    }

    function paintCard(card){
      const rankEl = document.getElementById('rank');
      const suitEl = document.getElementById('suit');
      const cornerTop = document.getElementById('cornerTop');
      const cardBox = document.getElementById('card');

      rankEl.textContent = card.rank;
      suitEl.textContent = card.suit;
      cornerTop.textContent = card.label;

      [rankEl, suitEl, cornerTop].forEach(el=>{
        el.classList.remove('red','black');
        el.classList.add(card.color);
      });

      cardBox.style.outline = card.color === 'red' ? '6px solid rgba(239,68,68,.25)'
                                                   : '6px solid rgba(17,24,39,.25)';
      cardBox.style.outlineOffset = '6px';
    }

    function renderHistory(){
      const box = document.getElementById('history');
      box.innerHTML = '';
      called.forEach(c=>{
        const span = document.createElement('span');
        span.className = 'history-pill';
        span.textContent = c.label;
        if (c.color === 'red') span.style.color = '#fecaca';
        box.appendChild(span);
      });
    }

    function nextCard(){
      if (deck.length === 0){
        document.getElementById('rank').textContent = 'END';
        document.getElementById('suit').textContent = '';
        document.getElementById('cornerTop').textContent = 'No cards left';
        return;
      }
      const card = deck.pop();
      called.push(card);
      paintCard(card);
      renderHistory();
      playSound();
    }

    function resetDeck(){
      called = [];
      buildDeck();
      shuffle(deck);
      paintCard({rank:'A', suit:'♠', color:'black', label:'A♠'});
      document.getElementById('history').innerHTML = '';
    }

    function toggleFullScreen(){
      if (!document.fullscreenElement){
        document.documentElement.requestFullscreen().catch(err=>{
          alert(`Full-screen error: ${err.message}`);
        });
      } else {
        document.exitFullscreen();
      }
    }

    resetDeck();
  </script>
</body>
</html>
