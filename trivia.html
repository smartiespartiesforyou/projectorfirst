<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trivia ‚Äî ProjectorFirst</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background: #fff;
      color: #111;
      font-family: Arial, sans-serif;
    }
    .modal-bg {
      background: rgba(0,0,0,0.55);
      position: fixed;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }
    .modal {
      background: white;
      color: black;
      border-radius: 20px;
      padding: 30px;
      width: 90%;
      max-width: 700px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    .big-btn {
      font-size: 40px;
      padding: 25px 60px;
      border-radius: 1rem;
      font-weight: 800;
      color: white;
      transition: background-color .1s ease;
    }
    .pf-blue { background: #1e3a8a; }
    .pf-blue:hover { background: #1d4ed8; }
  </style>
</head>

<body class="min-h-screen">
  <!-- HEADER -->
  <div class="max-w-6xl mx-auto flex justify-between items-center p-6 border-b border-gray-200">
    <a href="apps.html" class="pf-blue text-white text-xl font-bold px-5 py-3 rounded-xl">‚Üê Back to Apps</a>
    <button id="openEditor" class="bg-purple-700 text-white text-xl font-bold px-6 py-3 rounded-xl hover:bg-purple-600">
      Question Editor üìù
    </button>
  </div>

  <!-- CATEGORY SCREEN -->
  <div id="categoryScreen" class="text-center mt-10 px-6 max-w-6xl mx-auto">
    <h1 class="text-4xl md:text-6xl font-extrabold text-blue-800 mb-10">Choose a Category</h1>
    <div id="categoryButtons" class="grid grid-cols-1 sm:grid-cols-2 gap-6 max-w-4xl mx-auto"></div>
  </div>

  <!-- GAME SCREEN -->
  <div id="gameScreen" class="text-center mt-16 px-4 hidden max-w-6xl mx-auto">
    <h1 class="text-4xl md:text-6xl font-extrabold text-blue-800 mb-10" id="categoryTitle">Category</h1>

    <h2 id="questionDisplay" class="text-3xl md:text-5xl font-bold mb-16">
      Press ‚ÄúNext Question‚Äù
    </h2>

    <div class="flex justify-center gap-6 md:gap-10 mb-16">
      <button
        id="trueBtn"
        class="big-btn bg-green-600 hover:bg-green-500 hidden">
        TRUE
      </button>

      <button
        id="falseBtn"
        class="big-btn bg-red-600 hover:bg-red-500 hidden">
        FALSE
      </button>
    </div>

    <h2
      id="answerDisplay"
      class="text-7xl md:text-8xl font-extrabold mt-16 mb-6 hidden">
    </h2>

    <!-- NEW: Why button + explanation -->
    <button
      id="whyBtn"
      class="mt-2 px-6 py-3 bg-yellow-400 text-black font-bold rounded-xl text-2xl hidden">
      Why is this TRUE/FALSE?
    </button>

    <p
      id="explanationDisplay"
      class="mt-4 text-2xl md:text-3xl max-w-4xl mx-auto hidden">
    </p>

    <button id="nextBtn" class="big-btn pf-blue mt-12">Next Question</button>

    <div class="mt-8">
      <button id="backToCategories"
              class="px-6 py-3 bg-gray-300 text-gray-800 font-bold rounded-xl hover:bg-gray-200 text-xl">
        ‚¨Ö Back to Categories
      </button>
    </div>
  </div>

  <!-- EDITOR MODAL -->
  <div id="modalBg" class="modal-bg">
    <div class="modal">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-blue-800">Question Editor</h2>
        <button id="closeEditor" class="px-4 py-1 bg-gray-300 rounded-xl font-bold hover:bg-gray-400">Close</button>
      </div>

      <label class="font-bold text-gray-700">Question</label>
      <input id="inputQuestion" class="w-full border p-3 rounded-xl mb-4 text-lg" placeholder="Type your true/false question‚Ä¶">

      <label class="font-bold text-gray-700">Category</label>
      <select id="inputCategory" class="w-full border p-3 rounded-xl mb-4 text-lg"></select>

      <input id="newCategoryInput" class="w-full border p-3 rounded-xl mb-4 text-lg hidden" placeholder="Enter new category‚Ä¶">

      <label class="font-bold text-gray-700">Correct Answer</label>
      <select id="inputAnswer" class="w-full border p-3 rounded-xl mb-4 text-lg">
        <option value="TRUE">TRUE</option>
        <option value="FALSE">FALSE</option>
      </select>

      <!-- OPTIONAL: explanation input for new questions -->
      <label class="font-bold text-gray-700">Explanation (optional)</label>
      <textarea id="inputExplanation" class="w-full border p-3 rounded-xl mb-6 text-lg" placeholder="Why is this TRUE or FALSE? (You can read this aloud to residents)"></textarea>

      <button id="saveBtn" class="bg-green-600 text-white font-bold px-6 py-3 rounded-xl hover:bg-green-500">Save Question</button>

      <h3 class="text-xl font-bold mt-8 mb-2 text-blue-700">Your Saved Questions</h3>
      <ul id="savedList" class="space-y-2 text-lg"></ul>
    </div>
  </div>

<script>
  // üö® DATA VERSION: bump this if you change default questions/categories
  const TF_DATA_VERSION = "2026-01-10-v16";
  const savedVersion = localStorage.getItem("tfDataVersion");
  if (savedVersion !== TF_DATA_VERSION) {
    localStorage.removeItem("tfQuestions");
    localStorage.removeItem("tfCategories");
    localStorage.setItem("tfDataVersion", TF_DATA_VERSION);
  }

  // Default categories
  let categories = JSON.parse(localStorage.getItem("tfCategories") || "[]");
  if (categories.length === 0) {
    categories = [
      "Bible",
      "Animals",
      "History",
      "Food",
      "Fun Facts",
      "Music",
      "Movies",
      "New Orleans",
      "New Years",
      "Old TV Shows",
      "Valentines Day",
      "St Patricks Day",
      "Mardi Gras",
      "Easter",
      "July 4th",
      "Memorial Day",
      "Veterans Day",
      "Halloween",
      "Thanksgiving",
      "Christmas",
    ];
    localStorage.setItem("tfCategories", JSON.stringify(categories));
  }

  // Category button labels (what shows on-screen)
  const CATEGORY_LABELS = {
    Bible: "Bible üìñ",
    Animals: "Animals üêæ",
    History: "History üèõÔ∏è",
    Food: "Food üçé",
    "Fun Facts": "Fun Facts ü§Ø",
    Music: "Music üéµ",
    Movies: "Movies üé¨",
    "New Orleans": "New Orleans ‚öúÔ∏è",
    "New Years": "New Years üéâ",
    "Old TV Shows": "Old TV Shows üì∫",
    "Valentines Day": "Valentine‚Äôs Day ‚ù§Ô∏è",
    "St Patricks Day": "St. Patrick‚Äôs Day ‚òòÔ∏è",
    "Mardi Gras": "Mardi Gras üé≠",
    Easter: "Easter üê£",
    "July 4th": "July 4th üéÜ",
    "Memorial Day": "Memorial Day üïäÔ∏è",
    "Veterans Day": "Veterans Day ‚≠ê",
    Halloween: "Halloween üéÉ",
    Thanksgiving: "Thanksgiving ü¶É",
    Christmas: "Christmas üéÑ",
  };

  // Load questions or create defaults
  let questions = JSON.parse(localStorage.getItem("tfQuestions") || "[]");
  if (questions.length === 0) {
    questions = [
      // Bible Questions (first few shown as example)
      {
        question: "The Bible has 66 books.",
        answer: "TRUE",
        category: "Bible",
        explanation: "The standard Protestant Bible has 66 books: 39 in the Old Testament and 27 in the New."
      },
      {
        question: "Moses built the ark.",
        answer: "FALSE",
        category: "Bible",
        explanation: "Noah built the ark in Genesis. Moses came much later and led the Israelites out of Egypt."
      },
      {
        question: "David killed Goliath with a stone.",
        answer: "TRUE",
        category: "Bible",
        explanation: "In 1 Samuel 17, David defeats Goliath with a sling and a single stone."
      },
      {
        question: "Jonah was swallowed by a whale.",
        answer: "TRUE",
        category: "Bible",
        explanation: "The book of Jonah says he was swallowed by a 'great fish' after running from God."
      },
      {
        question: "Noah‚Äôs Ark rested on Mount Sinai.",
        answer: "FALSE",
        category: "Bible",
        explanation: "Genesis 8:4 says the ark rested on the mountains of Ararat, not Mount Sinai."
      },

      /* üëá YOUR ORIGINAL HUGE QUESTION LIST FOLLOWS.
         I‚Äôm keeping it exactly as you had it, just without explanations
         (you can add them over time).                               */

      // --- PASTE OF YOUR EXISTING QUESTIONS STARTS HERE ---
      // Easter Questions
{ question: "Easter celebrates the resurrection of Jesus Christ.", answer: "TRUE", category: "Easter" },
{ question: "Easter is celebrated on the same date every year.", answer: "FALSE", category: "Easter" },
{ question: "Easter Sunday always falls on a Sunday.", answer: "TRUE", category: "Easter" },
{ question: "Easter is considered the most important Christian holiday.", answer: "TRUE", category: "Easter" },
{ question: "The word Easter appears many times in the Bible.", answer: "FALSE", category: "Easter" },

{ question: "Easter follows the season of Lent.", answer: "TRUE", category: "Easter" },
{ question: "Lent lasts for about 40 days.", answer: "TRUE", category: "Easter" },
{ question: "Good Friday comes before Easter Sunday.", answer: "TRUE", category: "Easter" },
{ question: "Good Friday celebrates the birth of Jesus.", answer: "FALSE", category: "Easter" },
{ question: "Easter celebrates new life and hope.", answer: "TRUE", category: "Easter" },

{ question: "Easter eggs are a symbol of new life.", answer: "TRUE", category: "Easter" },
{ question: "Egg decorating is an Easter tradition.", answer: "TRUE", category: "Easter" },
{ question: "Chocolate eggs are commonly associated with Easter.", answer: "TRUE", category: "Easter" },
{ question: "The Easter Bunny is a religious figure.", answer: "FALSE", category: "Easter" },
{ question: "Children often participate in Easter egg hunts.", answer: "TRUE", category: "Easter" },

{ question: "Easter baskets are commonly given to children.", answer: "TRUE", category: "Easter" },
{ question: "The Easter Bunny traditionally delivers eggs and candy.", answer: "TRUE", category: "Easter" },
{ question: "Easter is only celebrated in the United States.", answer: "FALSE", category: "Easter" },
{ question: "Many cultures celebrate Easter in different ways.", answer: "TRUE", category: "Easter" },
{ question: "Easter has both religious and cultural traditions.", answer: "TRUE", category: "Easter" },

{ question: "Sunrise services are sometimes held on Easter morning.", answer: "TRUE", category: "Easter" },
{ question: "Easter marks the end of the church calendar year.", answer: "FALSE", category: "Easter" },
{ question: "The Easter season lasts only one day.", answer: "FALSE", category: "Easter" },
{ question: "White lilies are often associated with Easter.", answer: "TRUE", category: "Easter" },
{ question: "Easter always occurs in the winter.", answer: "FALSE", category: "Easter" },

{ question: "The date of Easter is based on the lunar calendar.", answer: "TRUE", category: "Easter" },
{ question: "Easter can fall in March or April.", answer: "TRUE", category: "Easter" },
{ question: "Palm Sunday occurs before Easter.", answer: "TRUE", category: "Easter" },
{ question: "Palm Sunday celebrates Jesus entering Jerusalem.", answer: "TRUE", category: "Easter" },
{ question: "Easter traditions often focus on family gatherings.", answer: "TRUE", category: "Easter" },

{ question: "Easter eggs were originally made of plastic.", answer: "FALSE", category: "Easter" },
{ question: "Easter encourages messages of forgiveness and renewal.", answer: "TRUE", category: "Easter" },
{ question: "All Easter traditions are religious.", answer: "FALSE", category: "Easter" },
{ question: "Easter is a time of celebration and joy.", answer: "TRUE", category: "Easter" },
{ question: "Easter has been celebrated for many centuries.", answer: "TRUE", category: "Easter" },

      // Mardi Gras Questions
{ question: "Mardi Gras means 'Fat Tuesday' in French.", answer: "TRUE", category: "Mardi Gras" },
{ question: "Mardi Gras is always celebrated on the same date each year.", answer: "FALSE", category: "Mardi Gras" },
{ question: "Mardi Gras takes place before the season of Lent.", answer: "TRUE", category: "Mardi Gras" },
{ question: "Mardi Gras is most closely associated with New Orleans in the U.S.", answer: "TRUE", category: "Mardi Gras" },
{ question: "Purple, green, and gold are Mardi Gras colors.", answer: "TRUE", category: "Mardi Gras" },

{ question: "Purple represents justice in Mardi Gras traditions.", answer: "TRUE", category: "Mardi Gras" },
{ question: "Green represents faith in Mardi Gras traditions.", answer: "FALSE", category: "Mardi Gras" },
{ question: "Gold represents power in Mardi Gras traditions.", answer: "FALSE", category: "Mardi Gras" },
{ question: "Mardi Gras parades feature decorated floats.", answer: "TRUE", category: "Mardi Gras" },
{ question: "Beads are commonly thrown during Mardi Gras parades.", answer: "TRUE", category: "Mardi Gras" },

      /* ‚Ä¶ KEEPING THE REST OF YOUR ORIGINAL QUESTIONS ‚Ä¶
         To save space here I‚Äôm not rewriting every single one,
         but in YOUR FILE just leave everything after this point
         exactly the way it already was.                          */

    ];
    localStorage.setItem("tfQuestions", JSON.stringify(questions));
  }

  // Grab DOM elements
  const modalBg = document.getElementById("modalBg");
  const categoryButtons = document.getElementById("categoryButtons");
  const inputCategory = document.getElementById("inputCategory");
  const newCategoryInput = document.getElementById("newCategoryInput");
  const savedList = document.getElementById("savedList");

  const questionDisplay = document.getElementById("questionDisplay");
  const answerDisplay = document.getElementById("answerDisplay");
  const trueBtn = document.getElementById("trueBtn");
  const falseBtn = document.getElementById("falseBtn");
  const whyBtn = document.getElementById("whyBtn");
  const explanationDisplay = document.getElementById("explanationDisplay");

  // STATE
  let current = null;
  let filtered = [];

  // RENDER CATEGORY BUTTONS
  function renderCategoryButtons() {
    categoryButtons.innerHTML = "";
    categories.forEach(cat => {
      const btn = document.createElement("button");
      btn.className = "pf-blue text-white text-2xl md:text-3xl font-bold py-6 rounded-2xl transition-all hover:scale-[1.02]";
      btn.textContent = CATEGORY_LABELS[cat] || cat;
      btn.onclick = () => startCategory(cat);
      categoryButtons.appendChild(btn);
    });
  }
  renderCategoryButtons();

  // CATEGORY DROPDOWN IN EDITOR
  function updateCategoryDropdown() {
    inputCategory.innerHTML = "";
    categories.forEach(cat => {
      const opt = document.createElement("option");
      opt.value = cat;
      opt.textContent = cat;
      inputCategory.appendChild(opt);
    });
    const addNew = document.createElement("option");
    addNew.value = "__NEW__";
    addNew.textContent = "+ Add New Category";
    inputCategory.appendChild(addNew);
  }
  updateCategoryDropdown();

  inputCategory.onchange = () => {
    if (inputCategory.value === "__NEW__") newCategoryInput.classList.remove("hidden");
    else newCategoryInput.classList.add("hidden");
    updateSavedList();
  };

  // OPEN/CLOSE EDITOR
  document.getElementById("openEditor").onclick = () => {
    modalBg.style.display = "flex";
    updateSavedList();
  };
  document.getElementById("closeEditor").onclick = () => {
    modalBg.style.display = "none";
    newCategoryInput.value = "";
    newCategoryInput.classList.add("hidden");
  };

  // SAVE QUESTION
  document.getElementById("saveBtn").onclick = () => {
    const q = document.getElementById("inputQuestion").value.trim();
    let cat = inputCategory.value;
    const a = document.getElementById("inputAnswer").value;
    const expl = document.getElementById("inputExplanation").value.trim();

    if (!q) return alert("Please enter a question.");
    if (cat === "__NEW__") {
      cat = newCategoryInput.value.trim();
      if (!cat) return alert("Enter a category name.");
      categories.push(cat);
      localStorage.setItem("tfCategories", JSON.stringify(categories));
      renderCategoryButtons();
      updateCategoryDropdown();
    }

    const newQ = { question: q, answer: a, category: cat };
    if (expl) newQ.explanation = expl;

    questions.push(newQ);
    localStorage.setItem("tfQuestions", JSON.stringify(questions));

    document.getElementById("inputQuestion").value = "";
    document.getElementById("inputExplanation").value = "";
    newCategoryInput.value = "";
    newCategoryInput.classList.add("hidden");
    inputCategory.value = cat;
    updateSavedList();
  };

  // SAVED LIST IN EDITOR
  function updateSavedList() {
    const cat = inputCategory.value;
    savedList.innerHTML = "";

    if (cat === "__NEW__") {
      savedList.innerHTML = `<p class="text-gray-500 italic">Select a category to view questions.</p>`;
      return;
    }

    const filteredQs = questions
      .map((q, idx) => ({ ...q, _idx: idx }))
      .filter(q => q.category === cat);

    if (filteredQs.length === 0) {
      savedList.innerHTML = `<p class="text-gray-500 italic">No questions yet for this category.</p>`;
      return;
    }

    filteredQs.forEach(q => {
      const li = document.createElement("li");
      li.innerHTML = `
        <div class="flex justify-between bg-gray-100 p-3 rounded-xl items-center">
          <div class="flex-1">
            <strong>${q.question}</strong> ‚Äî
            <span class="text-${q.answer === 'TRUE' ? 'green' : 'red'}-600 font-semibold">${q.answer}</span>
            <em class="text-gray-500">(${q.category})</em>
          </div>
          <button onclick="deleteQuestion(${q._idx})"
            class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 ml-4 whitespace-nowrap">
            Delete
          </button>
        </div>`;
      savedList.appendChild(li);
    });

    savedList.style.maxHeight = "300px";
    savedList.style.overflowY = "auto";
    savedList.style.paddingRight = "10px";
  }

  function deleteQuestion(index) {
    if (index >= 0 && index < questions.length) {
      questions.splice(index, 1);
      localStorage.setItem("tfQuestions", JSON.stringify(questions));
      updateSavedList();
    }
  }
  window.deleteQuestion = deleteQuestion;

  // START CATEGORY
  function startCategory(cat) {
    filtered = questions.filter(q => q.category === cat);

    document.getElementById("categoryScreen").classList.add("hidden");
    document.getElementById("gameScreen").classList.remove("hidden");
    document.getElementById("categoryTitle").textContent = CATEGORY_LABELS[cat] || cat;

    questionDisplay.textContent = 'Press ‚ÄúNext Question‚Äù';
    answerDisplay.classList.add("hidden");
    trueBtn.classList.add("hidden");
    falseBtn.classList.add("hidden");
    whyBtn.classList.add("hidden");
    explanationDisplay.classList.add("hidden");
    explanationDisplay.textContent = "";

    current = null;
  }

  // NEXT QUESTION
  document.getElementById("nextBtn").onclick = () => {
    if (filtered.length === 0) {
      alert("No questions in this category yet! Add some using the Question Editor.");
      return;
    }
    current = filtered[Math.floor(Math.random() * filtered.length)];

    questionDisplay.textContent = current.question;
    answerDisplay.classList.add("hidden");
    trueBtn.classList.remove("hidden");
    falseBtn.classList.remove("hidden");
    whyBtn.classList.add("hidden");
    explanationDisplay.classList.add("hidden");
    explanationDisplay.textContent = "";
  };

  // CHECK ANSWER
  function checkAnswer(choice) {
    if (!current) return;

    // Show the correct answer big (TRUE or FALSE)
    answerDisplay.textContent = current.answer;
    answerDisplay.classList.remove("hidden");

    trueBtn.classList.add("hidden");
    falseBtn.classList.add("hidden");

    // Explanation handling
    if (current.explanation) {
      whyBtn.classList.remove("hidden");
      explanationDisplay.textContent = current.explanation;
      explanationDisplay.classList.add("hidden"); // show only after click
    } else {
      whyBtn.classList.add("hidden");
      explanationDisplay.textContent = "";
      explanationDisplay.classList.add("hidden");
    }
  }

  // TRUE/FALSE buttons
  trueBtn.onclick = () => checkAnswer("TRUE");
  falseBtn.onclick = () => checkAnswer("FALSE");

  // WHY button
  whyBtn.onclick = () => {
    explanationDisplay.classList.toggle("hidden");
  };

  // BACK TO CATEGORIES
  document.getElementById("backToCategories").onclick = () => {
    document.getElementById("gameScreen").classList.add("hidden");
    document.getElementById("categoryScreen").classList.remove("hidden");

    questionDisplay.textContent = 'Press ‚ÄúNext Question‚Äù';
    answerDisplay.classList.add("hidden");
    trueBtn.classList.add("hidden");
    falseBtn.classList.add("hidden");
    whyBtn.classList.add("hidden");
    explanationDisplay.classList.add("hidden");
    explanationDisplay.textContent = "";

    current = null;
    filtered = [];
  };
</script>

</body>
</html>
