<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>❓ Trivia Game — ProjectorFirst</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ✅ Memberstack Loader -->
  <script 
    data-memberstack-app="app_cmgnwpg8y00x10suih4pua785"
    src="https://static.memberstack.com/scripts/v2/memberstack.js"
    type="text/javascript">
  </script>

  <!-- ✅ Protect Page -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const member = await window.$memberstackDom.getCurrentMember();
        if (!member.data) window.location.href = "/subscribe.html";
      } catch {
        window.location.href = "/subscribe.html";
      }
    });
  </script>

  <style>
    body {
      background: #fff;
      color: #111;
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 1rem;
    }
    h1 {
      font-size: 3rem;
      font-weight: 800;
      color: #1e3a8a;
      margin-bottom: 1rem;
    }
    .question-box {
      background: #000;
      color: #fff;
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      padding: 2rem;
      border-radius: 1.25rem;
      margin-top: 1rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .answer-box {
      font-size: 2rem;
      font-weight: 700;
      margin-top: 1rem;
      min-height: 60px;
    }
    .btn {
      font-size: 1.5rem;
      font-weight: bold;
      padding: 1rem 2rem;
      border-radius: 1rem;
      cursor: pointer;
      transition: transform 0.1s;
    }
    .btn:hover { transform: scale(1.05); }
    .btn-primary { background: #1e3a8a; color: white; }
    .btn-true { background: #16a34a; color: white; }
    .btn-false { background: #dc2626; color: white; }
  </style>
</head>

<body>
  <main class="w-full max-w-5xl text-center">
    <div class="mb-4">
      <a href="apps.html" class="btn btn-primary">⬅ Back to Apps</a>
    </div>

    <h1>❓ Trivia Game</h1>

    <!-- ✅ Dropdown for Theme -->
    <div class="mb-6 text-left">
      <label for="theme" class="block text-xl font-semibold text-blue-900 mb-2">Choose Theme</label>
      <select id="theme" class="w-full text-2xl p-3 border-2 border-blue-900 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400"></select>
    </div>

    <!-- ✅ Question + Answer -->
    <div id="questionBox" class="question-box">Press "Next Question" to begin</div>
    <div id="answerBox" class="answer-box"></div>

    <!-- ✅ Buttons -->
    <div class="flex flex-wrap justify-center gap-4 mt-6">
      <button onclick="nextQuestion()" class="btn btn-primary">Next Question</button>
      <button onclick="checkAnswer(true)" class="btn btn-true">True</button>
      <button onclick="checkAnswer(false)" class="btn btn-false">False</button>
    </div>
  </main>

  <script>
    const QUESTIONS = {
      general: [
        {q:"The capital of France is Paris.",a:true},
        {q:"There are 8 continents on Earth.",a:false},
        {q:"The Great Wall of China is visible from space.",a:false},
        {q:"A triangle has three sides.",a:true},
        {q:"The Pacific Ocean is the largest ocean.",a:true},
      ],
      holidays: [
        {q:"Christmas is celebrated on December 25.",a:true},
        {q:"Halloween is in July.",a:false},
        {q:"People celebrate New Year’s Day on January 1.",a:true},
        {q:"Easter always falls on the same date.",a:false},
        {q:"Independence Day in the USA is July 4.",a:true},
      ],
      movies: [
        {q:"Leonardo DiCaprio starred in Titanic.",a:true},
        {q:"The wizarding school in Harry Potter is called Hogwarts.",a:true},
        {q:"Batman’s real name is Clark Kent.",a:false},
        {q:"Toy Story features a cowboy named Woody.",a:true},
        {q:"Steven Spielberg directed Jaws.",a:true},
      ],
      residentRights: [
        {q:"Residents have the right to make their own choices about their daily routine.",a:true},
        {q:"Staff can read a resident’s mail if they suspect it has bad news.",a:false},
        {q:"Residents can refuse any medication or treatment.",a:true},
        {q:"Residents have the right to privacy during personal care.",a:true},
        {q:"Residents have the right to voice complaints without punishment.",a:true},
      ],
      science: [
        {q:"Mars is called the Red Planet.",a:true},
        {q:"Plants take in oxygen and release carbon dioxide.",a:false},
        {q:"Gravity keeps us on the ground.",a:true},
        {q:"The nucleus is the center of an atom.",a:true},
        {q:"Venus is the hottest planet.",a:true},
      ],
      sports: [
        {q:"A baseball team has 9 players.",a:true},
        {q:"Soccer is played with a puck.",a:false},
        {q:"Basketball uses a hoop and ball.",a:true},
        {q:"A strike in bowling means all pins are knocked down.",a:true},
        {q:"Hockey uses a puck.",a:true},
      ]
    };

    let currentTheme = "general";
    let questionPool = [];
    let currentQuestion = null;

    function initThemePicker() {
      const sel = document.getElementById("theme");
      sel.innerHTML = "";
      Object.keys(QUESTIONS).forEach(key => {
        const opt = document.createElement("option");
        opt.value = key;
        opt.textContent = key.charAt(0).toUpperCase() + key.slice(1);
        if (key === currentTheme) opt.selected = true;
        sel.appendChild(opt);
      });
      sel.addEventListener("change", (e) => {
        currentTheme = e.target.value;
        resetGame();
      });
      resetGame();
    }

    function resetGame() {
      questionPool = [...QUESTIONS[currentTheme]];
      shuffle(questionPool);
      document.getElementById("questionBox").textContent = "Press 'Next Question' to begin";
      document.getElementById("answerBox").textContent = "";
      currentQuestion = null;
    }

    function shuffle(arr) {
      const randomValues = new Uint32Array(arr.length);
      crypto.getRandomValues(randomValues);
      for (let i = arr.length - 1; i > 0; i--) {
        const j = randomValues[i] % (i + 1);
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function nextQuestion() {
      if (questionPool.length === 0) resetGame();
      currentQuestion = questionPool.pop();
      document.getElementById("questionBox").textContent = currentQuestion.q;
      document.getElementById("answerBox").textContent = "";
    }

    function checkAnswer(choice) {
      if (!currentQuestion) return;
      const answerBox = document.getElementById("answerBox");
      if (choice === currentQuestion.a) {
        answerBox.textContent = "✅ Correct!";
        answerBox.style.color = "green";
      } else {
        answerBox.textContent = "❌ Wrong!";
        answerBox.style.color = "red";
      }
    }

    initThemePicker();
  </script>
</body>
</html>
