<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Classic Bingo Caller â€” ProjectorFirst</title>
  <meta name="description" content="Classic Bingo Caller â€” simple, big-screen friendly bingo caller."/>
  <meta name="theme-color" content="#1e3a8a"/>
  <link rel="icon" href="/logo.svg" type="image/svg+xml"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #ffffff; color: #000000; }

    .caller-box {
      /* responsive square that scales with the screen */
      width: min(90vw, 70vh, 640px);
      height: min(90vw, 70vh, 640px);

      border: 6px solid #1e3a8a;
      border-radius: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;

      /* auto-fit the letter+number to the box */
      font-size: clamp(6rem, 22vmin, 16rem);
      line-height: 1;
      white-space: nowrap;   /* keep "B 12" on one line */
      font-weight: bold;

      background: #000;
      color: #fff;
      margin: 0 auto;
    }

    .recent-calls span {
      display: inline-block;
      margin: 0.5rem;
      font-size: clamp(2rem, 5vmin, 3rem); /* responsive size */
      font-weight: bold;
      color: #1e3a8a;
    }

    .btn {
      font-size: 1.75rem;
      font-weight: bold;
      padding: 1.25rem 2.5rem;
      border-radius: 1rem;
      transition: background 0.2s;
    }

    .btn-next { background: #1e3a8a; color: white; }
    .btn-next:hover { background: #1d4ed8; }

    .btn-undo { background: #facc15; color: black; }
    .btn-reset { background: #dc2626; color: white; }
    .btn-fullscreen { background: #6d28d9; color: white; }
  </style>
</head>
<body class="flex flex-col items-center justify-start min-h-screen py-10">
  <main class="w-full max-w-4xl text-center">
    <h1 class="text-5xl font-extrabold text-blue-900 mb-8">ðŸŽ‰ Classic Bingo Caller</h1>

    <!-- Caller Box -->
    <div id="callerBox" class="caller-box mb-8">â€”</div>

    <!-- Controls -->
    <div class="flex flex-wrap justify-center gap-4 mb-6">
      <button onclick="callNext()" class="btn btn-next">Call Next (Space)</button>
      <button onclick="undoCall()" class="btn btn-undo">Undo (Backspace)</button>
      <button onclick="resetCaller()" class="btn btn-reset">Reset (R)</button>
      <button onclick="toggleFullscreen()" class="btn btn-fullscreen">Fullscreen (F)</button>
    </div>

    <!-- Sound Button -->
    <button onclick="toggleSound()" id="soundBtn" class="btn border-2 border-blue-900 text-blue-900 bg-white">ðŸ”Š Sound</button>

    <!-- Recent Calls -->
    <h2 class="text-2xl font-bold text-blue-900 mt-10 mb-4">Recent Calls</h2>
    <div id="recentCalls" class="recent-calls"></div>
  </main>

  <script>
    const letters = ["B","I","N","G","O"];
    let allNumbers = [];
    let history = [];
    let soundOn = true;

    function initGame() {
      allNumbers = [];
      for (let i=0; i<letters.length; i++) {
        let min = i*15+1, max = i*15+15;
        for (let n=min; n<=max; n++) {
          allNumbers.push({letter: letters[i], number: n});
        }
      }
      shuffle(allNumbers);
      history = [];
      document.getElementById("callerBox").textContent = "â€”";
      document.getElementById("recentCalls").innerHTML = "";
    }

    function shuffle(arr) {
      for (let i=arr.length-1; i>0; i--) {
        const j = Math.floor(Math.random()* (i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function callNext() {
      if (allNumbers.length === 0) return;
      const call = allNumbers.pop();
      history.push(call);
      document.getElementById("callerBox").textContent = call.letter + " " + call.number;
      updateRecent();
      if (soundOn) {
        const utter = new SpeechSynthesisUtterance(call.letter + " " + call.number);
        speechSynthesis.speak(utter);
      }
    }

    function undoCall() {
      if (history.length === 0) return;
      const last = history.pop();
      allNumbers.push(last);
      document.getElementById("callerBox").textContent = "â€”";
      updateRecent();
    }

    function resetCaller() {
      initGame();
    }

    function updateRecent() {
      const recentDiv = document.getElementById("recentCalls");
      recentDiv.innerHTML = history.slice(-10).reverse().map(c => `<span>${c.letter} ${c.number}</span>`).join("");
    }

    function toggleSound() {
      soundOn = !soundOn;
      document.getElementById("soundBtn").textContent = soundOn ? "ðŸ”Š Sound" : "ðŸ”‡ Muted";
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        }
      }
    }

    document.addEventListener("keydown", e => {
      if (e.code === "Space") { e.preventDefault(); callNext(); }
      if (e.code === "Backspace") { e.preventDefault(); undoCall(); }
      if (e.code === "KeyR") { resetCaller(); }
      if (e.code === "KeyF") { toggleFullscreen(); }
    });

    initGame();
  </script>
</body>
</html>
