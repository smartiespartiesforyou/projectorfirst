<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Classic Bingo Caller â€” Projector Mode</title>

  <!-- Tailwind (utility only; keeps code short) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <meta name="theme-color" content="#0b1020"/>

  <style>
    :root{
      --bg:#0b1020;        /* deep navy */
      --panel:#0f172a;     /* slate-900 */
      --accent:#1e40af;    /* blue-800 */
      --btn:#1e3a8a;       /* blue-900 */
      --btn-hover:#1d4ed8; /* blue-700 */
    }

    html, body {
      height: 100%;
      background: radial-gradient(1200px 800px at 50% -10%, #172554 0%, var(--bg) 55%, #080b18 100%);
      color: #e5e7eb;
      margin: 0;
    }

    /* Main stage layout */
    .stage {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1.25rem;
      display: grid;
      grid-template-columns: 1fr min(70vmin, 820px) 1fr; /* side buttons / square / side buttons */
      grid-template-rows: auto auto 1fr;
      gap: 1.25rem;
      align-items: center;
      justify-items: center;
      min-height: 100dvh;
    }

    /* Center square caller */
    .caller-square {
      width: min(70vmin, 820px);
      aspect-ratio: 1 / 1;            /* keeps it perfectly square */
      background: #000;
      border: 10px solid #111827;     /* near-black border */
      border-radius: 1.5rem;
      display: grid;
      place-items: center;
      position: relative;
      box-shadow: 0 30px 80px rgba(0,0,0,0.6), inset 0 0 40px rgba(255,255,255,0.05);
    }
    .call-text {
      font-weight: 900;
      letter-spacing: -0.02em;
      color: #fff;
      text-shadow: 0 0 22px rgba(255,255,255,0.35);
      font-size: clamp(6rem, 18vmin, 20rem); /* huge, responsive */
      line-height: 1;
      user-select: none;
    }

    /* Button stacks on left/right */
    .control-col {
      display: grid;
      gap: 1rem;
      align-content: center;
      justify-items: stretch;
      width: 100%;
      max-width: 380px;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 1.25rem 1.75rem;
      font-size: clamp(1.25rem, 2.6vmin, 2rem);
      font-weight: 800;
      border-radius: 1rem;
      border: 0;
      cursor: pointer;
      user-select: none;
      transition: transform .06s ease, box-shadow .12s ease, background .12s ease, color .12s ease;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    }
    .btn:active { transform: translateY(1px) scale(0.995); }

    .btn-next       { background: #0ea5e9; color:#001018; }
    .btn-next:hover { background: #38bdf8; }

    .btn-fs         { background: #7c3aed; color:#f8fafc; }
    .btn-fs:hover   { background: #8b5cf6; }

    .btn-reset       { background: #ef4444; color:#fff; }
    .btn-reset:hover { background: #f87171; }

    .btn-sound {
      background: #0b1224;
      color: #c7d2fe;
      border: 2px solid #6366f1;
    }
    .btn-sound:hover {
      background: #111a34;
    }

    /* Recent balls row (under the square) */
    .recent-strip {
      grid-column: 1 / 4; /* span full width under the square */
      width: min(1400px, 92vw);
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: clamp(0.5rem, 1.1vmin, 1rem);
      padding: 0.75rem 0.5rem 1.25rem;
    }
    .ball {
      width: clamp(70px, 7vmin, 110px);
      height: clamp(70px, 7vmin, 110px);
      border-radius: 50%;
      display: grid;
      place-items: center;
      color:#fff;
      font-weight: 900;
      font-size: clamp(1.25rem, 3.3vmin, 2.2rem);
      letter-spacing: -0.02em;
      box-shadow:
        inset 0 -10px 18px rgba(0,0,0,0.35),
        0 8px 18px rgba(0,0,0,0.35);
      text-shadow: 0 2px 8px rgba(0,0,0,0.35);
      user-select: none;
      transform: translateZ(0);
      animation: pop 140ms ease-out;
    }
    @keyframes pop {
      from { transform: scale(0.72); opacity: 0; }
      to   { transform: scale(1);    opacity: 1; }
    }

    /* B I N G O color identities */
    .ball-B { background: #1e3a8a; } /* blue 900 */
    .ball-I { background: #dc2626; } /* red 600  */
    .ball-N { background: #16a34a; } /* green 600*/
    .ball-G { background: #f97316; } /* orange 500*/
    .ball-O { background: #7c3aed; } /* violet 600*/

    /* Small header bar */
    .topbar {
      grid-column: 1 / 4;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      padding-top: .25rem;
    }
    .app-title {
      font-size: clamp(1.4rem, 2.6vmin, 2.2rem);
      font-weight: 900;
      letter-spacing: .02em;
      color: #e2e8f0;
      text-shadow: 0 2px 8px rgba(0,0,0,0.35);
      user-select: none;
    }

    /* Mobile/short screens: stack controls below */
    @media (max-width: 980px) {
      .stage {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto auto;
      }
      .caller-square { width: min(90vw, 720px); }
      .control-col { max-width: 720px; width: min(90vw, 720px); grid-auto-flow: column; grid-auto-columns: 1fr; }
      .recent-strip { grid-column: 1; width: min(95vw, 1000px); }
    }
  </style>
</head>
<body>
  <main class="stage">
    <!-- Title -->
    <div class="topbar">
      <div class="app-title">ðŸŽ‰ Classic Bingo Caller</div>
    </div>

    <!-- Left controls -->
    <div class="control-col" aria-label="Left controls">
      <button id="btnNext" class="btn btn-next" title="Space">â–¶ Call Next</button>
      <button id="btnFS" class="btn btn-fs" title="F">â›¶ Fullscreen</button>
    </div>

    <!-- Center square -->
    <section class="caller-square" aria-live="polite" aria-atomic="true">
      <div id="callerText" class="call-text">â€”</div>
    </section>

    <!-- Right controls -->
    <div class="control-col" aria-label="Right controls">
      <button id="btnReset" class="btn btn-reset" title="R">â†º Reset Game</button>
      <button id="btnSound" class="btn btn-sound" title="S">ðŸ”Š Sound</button>
    </div>

    <!-- Recent balls row -->
    <div id="recentCalls" class="recent-strip" aria-label="Recent calls"></div>
  </main>

  <script>
    /**********************
     * Bingo game logic
     **********************/

    // Theme/color identity stays classic B-I-N-G-O (1-75)
    const LETTERS = ["B","I","N","G","O"];
    const RANGES = [[1,15],[16,30],[31,45],[46,60],[61,75]];

    let deck = [];     // remaining calls (shuffled)
    let history = [];  // all calls made
    let soundOn = true;

    const callerText   = document.getElementById("callerText");
    const recentStrip  = document.getElementById("recentCalls");
    const btnNext      = document.getElementById("btnNext");
    const btnReset     = document.getElementById("btnReset");
    const btnFS        = document.getElementById("btnFS");
    const btnSound     = document.getElementById("btnSound");

    function initDeck() {
      deck = [];
      history = [];
      for (let i = 0; i < LETTERS.length; i++) {
        const [min, max] = RANGES[i];
        for (let n = min; n <= max; n++) {
          deck.push({ letter: LETTERS[i], number: n });
        }
      }
      shuffle(deck);
      callerText.textContent = "â€”";
      recentStrip.innerHTML = "";
    }

    function shuffle(a) {
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
    }

    function callNext() {
      if (deck.length === 0) return;
      const call = deck.pop();
      history.push(call);
      renderCall(call);
      renderRecent();
      speak(call);
    }

    function renderCall(call) {
      callerText.textContent = call.letter + " " + call.number;
    }

    function renderRecent() {
      // show last ~60, newest at the end (left-to-right reading)
      const slice = history.slice(-60);
      recentStrip.innerHTML = slice
        .map(c => `<div class="ball ball-${c.letter}" aria-label="${c.letter} ${c.number}">${c.letter} ${c.number}</div>`)
        .join("");
    }

    function speak(call) {
      if (!soundOn) return;
      try {
        window.speechSynthesis.cancel();
        const utt = new SpeechSynthesisUtterance(`${call.letter} ${call.number}`);
        utt.rate = 1.0;
        // prefer a clear voice if available
        const voices = speechSynthesis.getVoices();
        const v = voices.find(v => /english/i.test(v.lang) && /female/i.test(v.name)) || voices[0];
        if (v) utt.voice = v;
        window.speechSynthesis.speak(utt);
      } catch(_) { /* speech unsupported; ignore */ }
    }

    function resetGame() {
      initDeck();
    }

    function toggleSound() {
      soundOn = !soundOn;
      btnSound.textContent = soundOn ? "ðŸ”Š Sound" : "ðŸ”‡ Muted";
      if (!soundOn) window.speechSynthesis.cancel();
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(()=>{});
      } else {
        document.exitFullscreen?.();
      }
    }

    /**********************
     * Events & Shortcuts
     **********************/
    btnNext.addEventListener("click", callNext);
    btnReset.addEventListener("click", resetGame);
    btnFS.addEventListener("click", toggleFullscreen);
    btnSound.addEventListener("click", toggleSound);

    document.addEventListener("keydown", (e) => {
      const code = e.code;
      if (code === "Space") { e.preventDefault(); callNext(); }
      else if (code === "KeyR") { resetGame(); }
      else if (code === "KeyF") { toggleFullscreen(); }
      else if (code === "KeyS") { toggleSound(); }
    });

    // Initialize
    initDeck();
  </script>
</body>
</html>
