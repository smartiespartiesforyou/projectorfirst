<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ‚úÖ Memberstack Script -->
  <script 
    data-memberstack-app="app_cmgnwpg8y00x10suih4pua785"
    src="https://static.memberstack.com/scripts/v2/memberstack.js"
    type="text/javascript">
  </script>

  <!-- ‚úÖ Gate Bingo Page -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Classic Bingo Caller ‚Äî ProjectorFirst</title>
  <meta name="description" content="High-contrast bingo caller with large letters and optional voice for senior care."/>
  <meta name="theme-color" content="#1e3a8a"/>
  <link rel="icon" href="/logo.svg" type="image/svg+xml"/>
  <script src="https://cdn.tailwindcss.com"></script>

  <script data-memberstack-id="pk_650cfbc9692b47a2c045"
          src="https://api.memberstack.com/static/memberstack.js"
          async></script>

  <style>
    body {
      background: #ffffff;
      color: #000;
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 1rem;
    }
    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      color: #1e3a8a;
      margin-bottom: 0.5rem;
    }
    .bingo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .caller-box {
      width: min(70vw, 600px);
      aspect-ratio: 1 / 1;
      background: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 1.25rem;
      font-weight: 900;
      box-shadow: 0 0 30px rgba(0,0,0,0.3);
      user-select: none;
    }
    .caller-number {
      font-size: clamp(12rem, 30vmin, 24rem);
      letter-spacing: 0.05em;
      line-height: 0.9;
    }
    .caller-emoji {
      font-size: clamp(3rem, 8vmin, 5rem);
      margin-top: 1rem;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .btn {
      font-size: 1.75rem;
      font-weight: bold;
      padding: 1.25rem 2.5rem;
      border-radius: 1rem;
      cursor: pointer;
      min-width: 200px;
      transition: transform 0.1s;
    }
    .btn:hover { transform: scale(1.05); }
    .btn-next { background: #1e3a8a; color: #fff; }
    .btn-fullscreen { background: #7c3aed; color: #fff; }
    .btn-reset { background: #dc2626; color: #fff; }
    .btn-sound { background: #fff; color: #1e3a8a; border: 2px solid #1e3a8a; }
    .recent-calls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 0.75rem;
      margin-top: 2rem;
      max-width: 90vw;
    }
    .recent-calls span {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: clamp(80px, 7vw, 120px);
      height: clamp(80px, 7vw, 120px);
      border-radius: 50%;
      color: #fff;
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: bold;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
    }
    .ball-B { background: #1e3a8a; }
    .ball-I { background: #dc2626; }
    .ball-N { background: #16a34a; }
    .ball-G { background: #f97316; }
    .ball-O { background: #7c3aed; }
    @media (max-width: 768px) {
      .bingo-container { flex-direction: column; }
      .controls { flex-direction: row; flex-wrap: wrap; justify-content: center; }
    }
  </style>
</head>

<body data-ms-content="bingo">
  <div class="w-full max-w-6xl text-center">
    <div class="mb-3">
      <a href="apps.html" class="text-white bg-blue-800 hover:bg-blue-900 px-6 py-3 rounded-full text-xl font-bold">‚¨Ö Back to Home</a>
    </div>

    <h1>üéâ Classic Bingo Caller</h1>

    <!-- Theme Selector -->
    <div class="mb-4">
      <label for="theme" class="block text-lg font-semibold text-blue-900 mb-1">Theme</label>
      <select id="theme" class="border-2 border-blue-900 text-xl rounded-xl p-2">
        <option value="classic">Classic</option>
        <option value="halloween">Halloween üéÉ</option>
        <option value="christmas">Christmas üéÑ</option>
        <option value="easter">Easter üê£</option>
        <option value="valentines">Valentine‚Äôs üíò</option>
        <option value="patriotic">Patriotic üá∫üá∏</option>
      </select>
    </div>

    <!-- Game Type Selector -->
    <div class="mb-6">
      <label for="gameType" class="block text-lg font-semibold text-blue-900 mb-1">Game Type</label>
      <select id="gameType" class="border-2 border-blue-900 text-xl rounded-xl p-2">
        <option value="75">USA (1‚Äì75)</option>
        <option value="90">UK (1‚Äì90)</option>
        <option value="100">Extended (1‚Äì100)</option>
      </select>
    </div>

    <div class="bingo-container">
      <div class="controls">
        <button id="nextBtn" class="btn btn-next">Call Next</button>
        <button id="fsBtn" class="btn btn-fullscreen">Fullscreen</button>
      </div>

      <div id="callerBox" class="caller-box">
        <div id="callerText" class="caller-number">‚Äî</div>
        <div id="callerEmoji" class="caller-emoji"></div>
      </div>

      <div class="controls">
        <button id="resetBtn" class="btn btn-reset">Reset</button>
        <button id="soundBtn" class="btn btn-sound">üîä Sound</button>
      </div>
    </div>

    <div id="recentCalls" class="recent-calls"></div>
  </div>

  <script>
    const letters = ["B","I","N","G","O"];
    const ranges = [[1,15],[16,30],[31,45],[46,60],[61,75]];
    let pool = [], history = [], soundOn = true;

    const callerText = document.getElementById("callerText");
    const callerEmoji = document.getElementById("callerEmoji");
    const recentDiv = document.getElementById("recentCalls");
    const themeSel = document.getElementById("theme");
    const gameTypeSel = document.getElementById("gameType");

    const THEMES = {
      classic: { emoji: "" },
      halloween: { emoji: "üéÉ" },
      christmas: { emoji: "üéÑ" },
      easter: { emoji: "üê£" },
      valentines: { emoji: "üíò" },
      patriotic: { emoji: "üá∫üá∏" }
    };

    function initGame() {
      pool = [];
      history = [];
      const maxNum = parseInt(gameTypeSel.value);
      if (maxNum === 75) {
        for (let i=0; i<letters.length; i++) {
          const [min,max] = ranges[i];
          for (let n=min; n<=max; n++) pool.push({letter:letters[i], number:n});
        }
      } else {
        for (let n=1; n<=maxNum; n++) pool.push({letter:"", number:n});
      }
      shuffle(pool);
      callerText.textContent = "‚Äî";
      callerEmoji.textContent = "";
      recentDiv.innerHTML = "";
    }

    function shuffle(arr) {
      for (let i=arr.length-1; i>0; i--) {
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
    }

    function callNext() {
      if (pool.length === 0) return;
      const pick = pool.pop();
      history.push(pick);
      const emoji = THEMES[themeSel.value]?.emoji || "";
      callerText.textContent = pick.letter ? `${pick.letter} ${pick.number}` : `${pick.number}`;
      callerEmoji.textContent = emoji;
      addRecent(pick);
      if (soundOn) speak(pick.letter ? `${pick.letter} ${pick.number}` : `${pick.number}`);
    }

    function addRecent(call) {
      const el = document.createElement("span");
      el.textContent = call.letter ? `${call.letter} ${call.number}` : `${call.number}`;
      el.className = call.letter ? `ball-${call.letter}` : "ball-B";
      recentDiv.appendChild(el);
      if (recentDiv.children.length > 100) recentDiv.firstChild.remove();
    }

    function resetGame() { initGame(); }

    function toggleSound() {
      soundOn = !soundOn;
      document.getElementById("soundBtn").textContent = soundOn ? "üîä Sound" : "üîá Muted";
      if (!soundOn) speechSynthesis.cancel();
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    function speak(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.rate = 1.0;
      speechSynthesis.speak(utter);
    }

    document.getElementById("nextBtn").addEventListener("click", callNext);
    document.getElementById("resetBtn").addEventListener("click", resetGame);
    document.getElementById("soundBtn").addEventListener("click", toggleSound);
    document.getElementById("fsBtn").addEventListener("click", toggleFullscreen);
    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") { e.preventDefault(); callNext(); }
      if (e.code === "KeyR") resetGame();
      if (e.code === "KeyF") toggleFullscreen();
      if (e.code === "KeyS") toggleSound();
    });

    gameTypeSel.addEventListener("change", initGame);
    initGame();
  </script>
</body>
</html>
