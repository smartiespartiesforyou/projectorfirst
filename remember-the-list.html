<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Remember the List</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card { position: relative; }
    .mark {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
      font-weight: 900; line-height: 1; pointer-events: none;
      text-shadow: 0 6px 14px rgba(0,0,0,.25);
    }
  </style>
</head>
<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-6xl mx-auto p-6 text-center">

    <h1 class="text-5xl font-extrabold mb-4 text-blue-900">Remember the List</h1>
    <div class="flex justify-center mb-6">
      <a href="apps.html"
         class="inline-flex items-center gap-2 px-6 py-3 bg-blue-900 text-white rounded-xl font-extrabold text-xl shadow hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300">
        ‚Üê Back to Apps
      </a>
    </div>

    <!-- Phase header / timer -->
    <div id="phaseBar" class="text-2xl md:text-3xl font-bold text-blue-900 mb-4">
      Look at the grocery list. You‚Äôll have <span id="seconds" class="text-red-600">30</span> seconds!
    </div>

    <!-- SHOW PHASE (WORDS ONLY) -->
    <div id="showPhase" class="mb-8">
      <ul id="targetList"
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 justify-center max-w-3xl mx-auto text-left">
        <!-- words injected -->
      </ul>
      <div class="mt-6">
        <button id="skipBtn"
                class="bg-blue-600 hover:bg-blue-800 text-white text-xl px-6 py-3 rounded-2xl shadow focus:outline-none focus:ring-4 focus:ring-blue-300">
          Start Guessing Now
        </button>
      </div>
    </div>

    <!-- GUESS PHASE (PICTURES) -->
    <div id="guessPhase" class="hidden">
      <div class="text-xl md:text-2xl font-bold text-blue-900 mb-2">
        Choose the <span class="underline">six</span> items that were on the list.
      </div>
      <div class="text-lg text-gray-700 mb-4">Selected: <span id="pickedCount" class="font-bold">0</span>/6</div>

      <div id="board"
           class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4 max-w-5xl mx-auto">
        <!-- picture cards injected -->
      </div>

      <div class="mt-6 flex justify-center gap-4">
        <button id="submitBtn"
                class="bg-blue-900 text-white text-xl px-6 py-3 rounded-2xl shadow disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-blue-300"
                disabled>
          Submit Guess
        </button>
        <button id="restartBtn"
                class="bg-white border-4 border-blue-900 text-blue-900 text-xl px-6 py-3 rounded-2xl shadow hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300">
          New Round
        </button>
      </div>
    </div>

    <!-- RESULTS SUMMARY -->
    <div id="resultBar" class="hidden text-3xl md:text-4xl font-extrabold mt-8 text-blue-900"></div>
  </div>

  <script>
    // ========== ITEM BANK ==========
    const BANK = [
      {name:"Milk",emoji:"ü•õ"},{name:"Eggs",emoji:"ü•ö"},{name:"Bread",emoji:"üçû"},
      {name:"Butter",emoji:"üßà"},{name:"Cheese",emoji:"üßÄ"},{name:"Yogurt",emoji:"ü•£"},
      {name:"Chicken",emoji:"üçó"},{name:"Fish",emoji:"üêü"},{name:"Beef",emoji:"ü•©"},
      {name:"Rice",emoji:"üçö"},{name:"Pasta",emoji:"üçù"},{name:"Beans",emoji:"ü´ò"},
      {name:"Cereal",emoji:"ü•£"},{name:"Oatmeal",emoji:"üåæ"},{name:"Coffee",emoji:"‚òï"},
      {name:"Tea",emoji:"ü´ñ"},{name:"Sugar",emoji:"üßÇ"},{name:"Salt",emoji:"üßÇ"},
      {name:"Apples",emoji:"üçé"},{name:"Bananas",emoji:"üçå"},{name:"Oranges",emoji:"üçä"},
      {name:"Grapes",emoji:"üçá"},{name:"Strawberries",emoji:"üçì"},{name:"Blueberries",emoji:"ü´ê"},
      {name:"Lettuce",emoji:"ü•¨"},{name:"Tomatoes",emoji:"üçÖ"},{name:"Onions",emoji:"üßÖ"},
      {name:"Potatoes",emoji:"ü•î"},{name:"Carrots",emoji:"ü•ï"},{name:"Broccoli",emoji:"ü•¶"},
      {name:"Cookies",emoji:"üç™"},{name:"Chocolate",emoji:"üç´"},{name:"Juice",emoji:"üßÉ"},
      {name:"Water",emoji:"üíß"},{name:"Soup",emoji:"ü•´"},{name:"Chips",emoji:"üçü"},
      {name:"Peanut Butter",emoji:"ü•ú"},{name:"Jam",emoji:"üçì"},{name:"Ice Cream",emoji:"üç®"}
    ];

    // ========== STATE ==========
    const SHOW_SECONDS = 30;
    let timerId = null;
    let countdown = SHOW_SECONDS;

    let targets = [];       // 6 items to remember
    let boardItems = [];    // 24 items to choose from (6 correct + 18 distractors)
    let picks = new Set();  // chosen item names
    let locked = false;     // after submit

    // ========== UTILS ==========
    function sample(array, n){
      const copy = [...array];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy.slice(0, n);
    }
    const byName = n => i => i.name === n;

    // ========== RENDERERS ==========
    function renderWordList(){
      const ul = document.getElementById("targetList");
      ul.innerHTML = "";
      targets.forEach(t=>{
        const li = document.createElement("li");
        li.className = "border-4 border-blue-900 rounded-2xl px-5 py-4 bg-white";
        li.innerHTML = `<span class="text-3xl md:text-4xl font-extrabold text-blue-900">${t.name}</span>`;
        ul.appendChild(li);
      });
    }

    function renderBoard(){
      const wrap = document.getElementById("board");
      wrap.innerHTML = "";
      const correctSet = new Set(targets.map(t=>t.name));

      boardItems.forEach(item=>{
        const selected = picks.has(item.name);
        const isCorrect = correctSet.has(item.name);

        const btn = document.createElement("button");
        btn.className = "card border-4 rounded-2xl px-3 py-4 bg-white flex flex-col items-center justify-center gap-2 " +
                        (locked
                          ? (selected
                              ? (isCorrect ? "border-green-600" : "border-red-600")
                              : (isCorrect ? "border-green-400" : "border-blue-600"))
                          : (selected ? "ring-4 ring-blue-300 border-blue-900" : "border-blue-600"));
        btn.dataset.name = item.name;
        btn.disabled = locked;

        btn.innerHTML =
          `<span class="text-[4.5rem] sm:text-[5.5rem] leading-none">${item.emoji}</span>
           <span class="text-xl md:text-2xl font-extrabold text-blue-900">${item.name}</span>`;

        // Overlay marks after submit
        if (locked && selected && !isCorrect){
          const mark = document.createElement("div");
          mark.className = "mark text-[6rem] sm:text-[7rem] text-red-600";
          mark.textContent = "‚úò";
          btn.appendChild(mark);
        }
        if (locked && selected && isCorrect){
          const mark = document.createElement("div");
          mark.className = "mark text-[5rem] sm:text-[6rem] text-green-600";
          mark.textContent = "‚úì";
          btn.appendChild(mark);
        }

        btn.addEventListener("click", ()=>{
          if (locked) return;
          if (picks.has(item.name)) picks.delete(item.name);
          else {
            if (picks.size >= 6) return;
            picks.add(item.name);
          }
          document.getElementById("pickedCount").textContent = picks.size;
          document.getElementById("submitBtn").disabled = (picks.size !== 6);
          renderBoard();
        });

        wrap.appendChild(btn);
      });
    }

    function showResultBar(){
      const correctNames = new Set(targets.map(t=>t.name));
      let score = 0;
      picks.forEach(p => { if (correctNames.has(p)) score++; });
      const bar = document.getElementById("resultBar");
      bar.textContent = `You found ${score} of 6!`;
      bar.classList.remove("hidden");
    }

    // ========== PHASES ==========
    function toShowPhase(){
      locked = false;
      picks.clear();
      document.getElementById("resultBar").classList.add("hidden");

      document.getElementById("showPhase").classList.remove("hidden");
      document.getElementById("guessPhase").classList.add("hidden");

      countdown = SHOW_SECONDS;
      document.getElementById("phaseBar").innerHTML =
        `Look at the grocery list. You‚Äôll have <span id="seconds" class="text-red-600">${SHOW_SECONDS}</span> seconds!`;

      renderWordList();

      tick();
      clearInterval(timerId);
      timerId = setInterval(tick, 1000);
    }

    function toGuessPhase(){
      clearInterval(timerId);

      // Build board (6 targets + 18 distractors = 24)
      const distractorPool = BANK.filter(x=>!targets.some(t=>t.name===x.name));
      const distractors = sample(distractorPool, 18);
      boardItems = sample([...targets, ...distractors], 24);

      document.getElementById("showPhase").classList.add("hidden");
      document.getElementById("guessPhase").classList.remove("hidden");
      document.getElementById("phaseBar").textContent = "Now pick the six items you remember!";
      document.getElementById("pickedCount").textContent = "0";
      document.getElementById("submitBtn").disabled = true;

      renderBoard();
    }

    function tick(){
      countdown--;
      const s = document.getElementById("seconds");
      if (s) s.textContent = Math.max(countdown, 0);
      if (countdown <= 0){
        clearInterval(timerId);
        toGuessPhase();
      }
    }

    function newRound(){
      targets = sample(BANK, 6);
      toShowPhase();
    }

    // ========== HOOKS ==========
    document.getElementById("skipBtn").addEventListener("click", toGuessPhase);
    document.getElementById("restartBtn").addEventListener("click", newRound);

    document.getElementById("submitBtn").addEventListener("click", ()=>{
      if (picks.size !== 6) return;
      locked = true;           // freeze choices
      renderBoard();           // draw ‚úì and big ‚úò overlays
      showResultBar();         // show score
    });

    // Start
    newRound();
  </script>
</body>
</html>
