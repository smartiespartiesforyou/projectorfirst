<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Remember the List</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-6xl mx-auto p-6 text-center">
    <!-- Title -->
    <h1 class="text-5xl font-extrabold mb-4 text-blue-900">Remember the List</h1>
    <!-- Back to Apps -->
    <div class="flex justify-center mb-6">
      <a href="apps.html"
         class="inline-flex items-center gap-2 px-6 py-3 bg-blue-900 text-white rounded-xl font-extrabold text-xl shadow hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300">
        ‚Üê Back to Apps
      </a>
    </div>

    <!-- Instructions / Timer -->
    <div id="phaseBar" class="text-2xl md:text-3xl font-bold text-blue-900 mb-4">
      Look at the grocery list. You‚Äôll have <span id="seconds" class="text-red-600">30</span> seconds!
    </div>

    <!-- SHOW PHASE: the list to remember -->
    <div id="showPhase" class="mb-8">
      <div id="targetList"
           class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 gap-4 justify-center max-w-3xl mx-auto">
        <!-- items injected -->
      </div>
      <div class="mt-6">
        <button id="skipBtn"
                class="bg-blue-600 hover:bg-blue-800 text-white text-xl px-6 py-3 rounded-2xl shadow focus:outline-none focus:ring-4 focus:ring-blue-300">
          Start Guessing Now
        </button>
      </div>
    </div>

    <!-- GUESS PHASE: pick the six items -->
    <div id="guessPhase" class="hidden">
      <div class="text-xl md:text-2xl font-bold text-blue-900 mb-2">
        Choose the <span class="underline">six</span> items that were on the list.
      </div>
      <div class="text-lg text-gray-700 mb-4">Selected: <span id="pickedCount" class="font-bold">0</span>/6</div>

      <div id="board"
           class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4 max-w-5xl mx-auto">
        <!-- option cards injected -->
      </div>

      <div class="mt-6 flex justify-center gap-4">
        <button id="submitBtn"
                class="bg-blue-900 text-white text-xl px-6 py-3 rounded-2xl shadow disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-blue-300"
                disabled>
          Submit Guess
        </button>
        <button id="restartBtn"
                class="bg-white border-4 border-blue-900 text-blue-900 text-xl px-6 py-3 rounded-2xl shadow hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300">
          New Round
        </button>
      </div>
    </div>

    <!-- RESULT PHASE -->
    <div id="resultPhase" class="hidden">
      <div id="resultHeader" class="text-3xl md:text-4xl font-extrabold mb-4 text-blue-900"></div>

      <div class="grid md:grid-cols-2 gap-6 max-w-5xl mx-auto text-left">
        <div class="border-4 border-green-600 rounded-2xl p-4">
          <div class="text-2xl font-extrabold text-green-700 mb-2">‚úî The Correct List</div>
          <ul id="correctList" class="space-y-2 text-2xl"></ul>
        </div>
        <div class="border-4 border-blue-600 rounded-2xl p-4">
          <div class="text-2xl font-extrabold text-blue-700 mb-2">Your Picks</div>
          <ul id="yourPicks" class="space-y-2 text-2xl"></ul>
        </div>
      </div>

      <div class="mt-8">
        <button id="playAgainBtn"
                class="bg-blue-900 text-white text-xl px-6 py-3 rounded-2xl shadow hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300">
          Play Again
        </button>
      </div>
    </div>
  </div>

  <script>
    // ---------- ITEM BANK (Groceries) ----------
    // Simple text + emoji for quick recognition.
    const GROCERY_BANK = [
      {name:"Milk",emoji:"ü•õ"},{name:"Eggs",emoji:"ü•ö"},{name:"Bread",emoji:"üçû"},
      {name:"Butter",emoji:"üßà"},{name:"Cheese",emoji:"üßÄ"},{name:"Yogurt",emoji:"ü•£"},
      {name:"Chicken",emoji:"üçó"},{name:"Fish",emoji:"üêü"},{name:"Beef",emoji:"ü•©"},
      {name:"Rice",emoji:"üçö"},{name:"Pasta",emoji:"üçù"},{name:"Beans",emoji:"ü´ò"},
      {name:"Cereal",emoji:"ü•£"},{name:"Oatmeal",emoji:"üåæ"},{name:"Coffee",emoji:"‚òï"},
      {name:"Tea",emoji:"ü´ñ"},{name:"Sugar",emoji:"üßÇ"},{name:"Salt",emoji:"üßÇ"},
      {name:"Apples",emoji:"üçé"},{name:"Bananas",emoji:"üçå"},{name:"Oranges",emoji:"üçä"},
      {name:"Grapes",emoji:"üçá"},{name:"Strawberries",emoji:"üçì"},{name:"Blueberries",emoji:"ü´ê"},
      {name:"Lettuce",emoji:"ü•¨"},{name:"Tomatoes",emoji:"üçÖ"},{name:"Onions",emoji:"üßÖ"},
      {name:"Potatoes",emoji:"ü•î"},{name:"Carrots",emoji:"ü•ï"},{name:"Broccoli",emoji:"ü•¶"},
      {name:"Cookies",emoji:"üç™"},{name:"Chocolate",emoji:"üç´"},{name:"Juice",emoji:"üßÉ"},
      {name:"Water",emoji:"üíß"},{name:"Soup",emoji:"ü•´"},{name:"Chips",emoji:"üçü"},
      {name:"Peanut Butter",emoji:"ü•ú"},{name:"Jam",emoji:"üçì"},{name:"Ice Cream",emoji:"üç®"}
    ];

    // ---------- STATE ----------
    const SHOW_SECONDS = 30;
    let countdown = SHOW_SECONDS;
    let timerId = null;

    let targets = [];       // the 6 items to remember
    let boardItems = [];    // 6 targets + distractors (e.g., 24 total)
    let picks = new Set();  // selected names

    // ---------- UTIL ----------
    function sample(array, n){
      const copy = [...array];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy.slice(0, n);
    }

    function byName(name){ return (item)=>item.name === name; }

    // ---------- RENDER HELPERS ----------
    function renderTargetList(){
      const wrap = document.getElementById("targetList");
      wrap.innerHTML = "";
      targets.forEach(t=>{
        const card = document.createElement("div");
        card.className = "border-4 border-blue-900 rounded-2xl p-4 bg-white flex items-center justify-center gap-3";
        card.innerHTML = `<span class="text-5xl">${t.emoji}</span>
                          <span class="text-3xl md:text-4xl font-extrabold text-blue-900">${t.name}</span>`;
        wrap.appendChild(card);
      });
    }

    function renderBoard(){
      const wrap = document.getElementById("board");
      wrap.innerHTML = "";
      boardItems.forEach(item=>{
        const btn = document.createElement("button");
        btn.className =
          "group border-4 border-blue-600 rounded-2xl px-3 py-4 bg-white flex flex-col items-center justify-center gap-2 " +
          "focus:outline-none focus:ring-4 focus:ring-blue-300 text-blue-900";
        btn.setAttribute("data-name", item.name);

        const picked = picks.has(item.name);
        if (picked) btn.classList.add("ring-4","ring-blue-300","border-blue-900");

        btn.innerHTML =
          `<span class="text-6xl leading-none">${item.emoji}</span>
           <span class="text-2xl md:text-3xl font-extrabold leading-tight">${item.name}</span>`;

        btn.addEventListener("click", ()=>{
          if (picks.has(item.name)) {
            picks.delete(item.name);
          } else {
            if (picks.size >= 6) return; // cap at 6
            picks.add(item.name);
          }
          document.getElementById("pickedCount").textContent = picks.size;
          document.getElementById("submitBtn").disabled = (picks.size !== 6);
          renderBoard(); // re-render highlight
        });

        wrap.appendChild(btn);
      });
    }

    // ---------- PHASE CONTROL ----------
    function toShowPhase(){
      document.getElementById("showPhase").classList.remove("hidden");
      document.getElementById("guessPhase").classList.add("hidden");
      document.getElementById("resultPhase").classList.add("hidden");
      document.getElementById("phaseBar").innerHTML =
        `Look at the grocery list. You‚Äôll have <span id="seconds" class="text-red-600">${SHOW_SECONDS}</span> seconds!`;
      countdown = SHOW_SECONDS;
      tick();
      timerId = setInterval(tick, 1000);
    }

    function toGuessPhase(){
      clearInterval(timerId);
      document.getElementById("showPhase").classList.add("hidden");
      document.getElementById("guessPhase").classList.remove("hidden");
      document.getElementById("resultPhase").classList.add("hidden");
      document.getElementById("phaseBar").textContent =
        "Now pick the six items you remember!";
      picks.clear();
      document.getElementById("pickedCount").textContent = "0";
      document.getElementById("submitBtn").disabled = true;

      // Build board: 6 targets + 18 distractors = 24
      const distractorPool = GROCERY_BANK.filter(x=>!targets.some(t=>t.name===x.name));
      const distractors = sample(distractorPool, 18);
      boardItems = sample([...targets, ...distractors], 24);
      renderBoard();
    }

    function toResultPhase(){
      document.getElementById("showPhase").classList.add("hidden");
      document.getElementById("guessPhase").classList.add("hidden");
      document.getElementById("resultPhase").classList.remove("hidden");

      const correctNames = new Set(targets.map(t=>t.name));
      let score = 0;
      picks.forEach(p=>{ if (correctNames.has(p)) score++; });

      const header = document.getElementById("resultHeader");
      header.textContent = `You found ${score} of 6!`;

      // Correct list
      const cl = document.getElementById("correctList");
      cl.innerHTML = "";
      targets.forEach(t=>{
        const li = document.createElement("li");
        li.innerHTML = `<span class="text-4xl">${t.emoji}</span>
                        <span class="ml-3 font-extrabold">${t.name}</span>`;
        cl.appendChild(li);
      });

      // Your picks (mark ‚úì or ‚úó)
      const yp = document.getElementById("yourPicks");
      yp.innerHTML = "";
      [...picks].forEach(name=>{
        const item = GROCERY_BANK.find(byName(name)) || {emoji:"‚ùì",name};
        const ok = correctNames.has(name);
        const li = document.createElement("li");
        li.innerHTML = `<span class="text-4xl">${item.emoji}</span>
                        <span class="ml-3 font-extrabold">${item.name}</span>
                        <span class="ml-3 ${ok?"text-green-700":"text-red-700"}">${ok?"‚úî":"‚úò"}</span>`;
        yp.appendChild(li);
      });
    }

    function tick(){
      countdown--;
      const s = document.getElementById("seconds");
      if (s) s.textContent = Math.max(countdown, 0);
      if (countdown <= 0){
        clearInterval(timerId);
        toGuessPhase();
      }
    }

    // ---------- NEW ROUND ----------
    function newRound(){
      targets = sample(GROCERY_BANK, 6);
      renderTargetList();
      toShowPhase();
    }

    // ---------- HOOKS ----------
    document.getElementById("skipBtn").addEventListener("click", toGuessPhase);
    document.getElementById("restartBtn").addEventListener("click", newRound);
    document.getElementById("playAgainBtn").addEventListener("click", newRound);
    document.getElementById("submitBtn").addEventListener("click", toResultPhase);

    // Start
    newRound();
  </script>
</body>
</html>
