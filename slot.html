<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slot Machine ‚Ä¢ ProjectorFirst</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light">
  <style>
    /* Respect users who prefer less motion */
    @media (prefers-reduced-motion: reduce) {
      .reel-animate { transition: none !important; animation: none !important; }
    }
  </style>
</head>
<body class="bg-white text-black">
  <!-- Simple header to match the rest of your site -->
  <header class="border-b border-gray-200 bg-white">
    <div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="/apps.html" class="text-lg md:text-xl font-medium text-blue-700 hover:underline">
        ‚Üê Back to Apps
      </a>
      <div class="text-xl md:text-2xl font-bold">ProjectorFirst</div>
    </div>
  </header>

  <main class="max-w-3xl mx-auto px-4 py-8 md:py-12">
    <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-6">Slot Machine</h1>
    <p class="text-xl md:text-2xl text-gray-800 mb-8">
      Press <span class="font-semibold">Spin</span>. If all three match, you win!
    </p>

    <!-- Controls -->
    <div class="flex flex-wrap items-center gap-5 mb-8">
      <button id="spinBtn"
              class="px-8 py-5 text-3xl md:text-4xl font-bold rounded-2xl bg-blue-600 text-white hover:bg-blue-700 shadow focus:outline-none focus:ring-4 focus:ring-blue-300">
        Spin
      </button>
      <label class="flex items-center gap-3 text-lg md:text-2xl">
        <input id="soundToggle" type="checkbox" class="w-6 h-6" checked>
        Sound on
      </label>
    </div>

    <!-- Reels (HUGE and high-contrast) -->
    <section aria-label="Reels"
             class="grid grid-cols-3 gap-5 md:gap-8 mb-6">
      <div class="w-[9.5rem] h-[9.5rem] md:w-[13rem] md:h-[13rem] xl:w-[15rem] xl:h-[15rem] flex items-center justify-center
                  text-[6rem] md:text-[8.5rem] xl:text-[9.5rem]
                  border-8 border-gray-900 rounded-3xl bg-gray-50 select-none reel-animate"
           aria-label="Reel 1">üçí</div>

      <div class="w-[9.5rem] h-[9.5rem] md:w-[13rem] md:h-[13rem] xl:w-[15rem] xl:h-[15rem] flex items-center justify-center
                  text-[6rem] md:text-[8.5rem] xl:text-[9.5rem]
                  border-8 border-gray-900 rounded-3xl bg-gray-50 select-none reel-animate"
           aria-label="Reel 2">üçã</div>

      <div class="w-[9.5rem] h-[9.5rem] md:w-[13rem] md:h-[13rem] xl:w-[15rem] xl:h-[15rem] flex items-center justify-center
                  text-[6rem] md:text-[8.5rem] xl:text-[9.5rem]
                  border-8 border-gray-900 rounded-3xl bg-gray-50 select-none reel-animate"
           aria-label="Reel 3">üçá</div>
    </section>

    <!-- Result message -->
    <p id="message" class="text-3xl md:text-4xl font-bold min-h-[2.8rem]" aria-live="polite"></p>

    <!-- Help -->
    <p class="text-base md:text-lg text-gray-600 mt-4">
      Tip: Toggle sound above. You can press <kbd>Enter</kbd> while the Spin button is focused.
    </p>
  </main>

  <!-- Sounds -->
  <audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-slot-machine-loop-222.wav"></audio>
  <audio id="winSound"  src="https://assets.mixkit.co/sfx/preview/mixkit-winning-casino-2067.wav"></audio>
  <audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-lose-2027.wav"></audio>

  <script>
    // Distinct, easy-to-recognize symbols (no lookalikes)
    const symbols = ["üçí","üçã","üçá","üçä","üçâ","‚≠ê","7Ô∏è‚É£","üîî"];

    const reels = document.querySelectorAll("section[aria-label='Reels'] div");
    const spinBtn = document.getElementById("spinBtn");
    const msg = document.getElementById("message");

    const soundToggle = document.getElementById("soundToggle");
    const spinSound = document.getElementById("spinSound");
    const winSound  = document.getElementById("winSound");
    const loseSound = document.getElementById("loseSound");

    // Accessibility
    spinBtn.setAttribute("aria-label","Spin the reels");

    function playSafe(audio) {
      if (!soundToggle.checked) return;
      try { audio.currentTime = 0; audio.play(); } catch(_) {}
    }
    function stop(audio){ try { audio.pause(); audio.currentTime = 0; } catch(_) {} }

    function spinOnce() {
      msg.textContent = "";
      stop(winSound); stop(loseSound);
      playSafe(spinSound);

      const results = [];

      // Simple rolling effect + staggered stops
      reels.forEach((reel, i) => {
        let ticks = 0;
        const flasher = setInterval(() => {
          reel.textContent = symbols[Math.floor(Math.random() * symbols.length)];
          ticks++;
          if (ticks >= 12) clearInterval(flasher);
        }, 45);

        setTimeout(() => {
          const symbol = symbols[Math.floor(Math.random()*symbols.length)];
          reel.textContent = symbol;
          results[i] = symbol;

          if (i === reels.length - 1) {
            stop(spinSound);
            const win = results[0] === results[1] && results[1] === results[2];
            if (win) {
              playSafe(winSound);
              msg.textContent = "üéâ Winner! üéâ";
              msg.className = "text-4xl md:text-5xl font-extrabold text-green-700";
            } else {
              playSafe(loseSound);
              msg.textContent = "Try again!";
              msg.className = "text-3xl md:text-4xl font-bold text-gray-900";
            }
          }
        }, 600 + i * 450); // stagger each reel's final stop
      });
    }

    spinBtn.addEventListener("click", spinOnce);
    spinBtn.addEventListener("keyup", (e) => {
      if (e.key === "Enter" || e.key === " ") spinOnce();
    });
  </script>
</body>
</html>
