<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Magic Pot ‚Äî Recipe Rater</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .pot { background: radial-gradient(circle at 50% 35%, #1f2937 0%, #0f172a 60%); }
    .steam { animation: float 3s ease-in-out infinite; opacity: .85 }
    @keyframes float {
      0% { transform: translateY(8px); opacity: .7 }
      50% { transform: translateY(-8px); opacity: 1 }
      100% { transform: translateY(8px); opacity: .7 }
    }
    .pop { animation: pop .25s ease-out }
    @keyframes pop { 0% { transform: scale(.9) } 100% { transform: scale(1) } }
    .overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,.75);
      display: none; align-items: center; justify-content: center;
      z-index: 50;
    }
    .overlay.show { display: flex; }
  </style>
</head>

<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-6xl mx-auto p-6">
    <!-- Title & Nav -->
    <div class="flex items-center justify-between gap-3 mb-4">
      <a href="apps.html" class="px-5 py-3 rounded-xl bg-blue-900 text-white text-xl font-bold hover:bg-blue-800">‚Üê Apps</a>
      <h1 class="text-3xl sm:text-5xl font-extrabold text-blue-900 text-center flex-1">üßô‚Äç‚ôÇÔ∏è Magic Pot ‚Äî Recipe Rater</h1>
      <button id="fullscreenBtn" class="px-4 py-3 rounded-xl bg-blue-700 text-white font-bold hover:bg-blue-800">‚õ∂ Full Screen</button>
    </div>

    <!-- Stage -->
    <div class="grid lg:grid-cols-2 gap-6">
      <!-- Pot / Display -->
      <div class="rounded-3xl border-8 border-blue-900 overflow-hidden shadow-2xl bg-blue-50">
        <div class="p-6 sm:p-8">
          <!-- Pot -->
          <div class="relative w-full mx-auto" style="aspect-ratio: 16/12;">
            <!-- pot body -->
            <div class="absolute inset-x-8 bottom-6 top-1/3 pot rounded-3xl shadow-inner border-8 border-slate-800"></div>
            <!-- pot rim -->
            <div class="absolute inset-x-4 top-1/4 h-10 bg-slate-800 rounded-full shadow"></div>
            <!-- handles -->
            <div class="absolute left-2 top-1/3 w-10 h-16 bg-slate-800 rounded-lg"></div>
            <div class="absolute right-2 top-1/3 w-10 h-16 bg-slate-800 rounded-lg"></div>
            <!-- steam -->
            <div class="absolute left-1/3 top-[14%] w-6 h-24 bg-gradient-to-b from-white/80 to-transparent rounded-full steam"></div>
            <div class="absolute left-1/2 top-[12%] w-6 h-28 bg-gradient-to-b from-white/80 to-transparent rounded-full steam"></div>
            <div class="absolute left-2/3 top-[16%] w-6 h-20 bg-gradient-to-b from-white/80 to-transparent rounded-full steam"></div>

            <!-- ingredient chips floating -->
            <div id="chipLayer" class="absolute inset-0 pointer-events-none"></div>
          </div>

          <!-- Ingredient list -->
          <div class="mt-6 bg-white border-4 border-blue-900 rounded-2xl p-4 min-h-[120px]">
            <div class="text-xl font-bold text-blue-900 mb-2">Ingredients in the Pot</div>
            <div id="ingredientList" class="flex flex-wrap gap-2"></div>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div class="rounded-3xl border-8 border-blue-900 overflow-hidden shadow-2xl bg-white">
        <div class="p-6 sm:p-8">
          <div class="text-2xl font-extrabold text-blue-900 mb-4">Add Ingredient</div>
          <div class="flex flex-col sm:flex-row gap-3 mb-4">
            <input id="ingInput" type="text" placeholder="Type an ingredient‚Ä¶"
                   class="flex-1 border-4 border-blue-900 rounded-xl py-3 px-4 text-xl font-semibold"/>
            <button id="addBtn" class="px-5 py-3 rounded-xl bg-green-600 text-white text-2xl font-extrabold hover:bg-green-700">Add</button>
          </div>

          <!-- Quick picks -->
          <div class="text-lg font-bold text-blue-900 mb-2">Quick Picks</div>
          <div id="quickRow" class="flex flex-wrap gap-2 mb-6">
            <!-- filled by JS -->
          </div>

          <div class="grid grid-cols-3 gap-3 mb-6">
            <button id="undoBtn" class="py-4 rounded-2xl bg-yellow-400 text-blue-900 text-xl font-extrabold hover:bg-yellow-300">Undo</button>
            <button id="clearBtn" class="py-4 rounded-2xl bg-gray-700 text-white text-xl font-extrabold hover:bg-gray-800">Clear</button>
            <button id="stirBtn" class="py-4 rounded-2xl bg-purple-700 text-white text-xl font-extrabold hover:bg-purple-800">Stir & Rate</button>
          </div>

          <div class="bg-blue-50 border-4 border-blue-900 rounded-2xl p-4">
            <div class="text-xl font-bold text-blue-900">Result</div>
            <div id="resultBox" class="mt-2 space-y-2">
              <div id="dishName" class="text-3xl font-extrabold text-blue-900"></div>
              <div id="score" class="text-4xl font-black"></div>
              <div id="verdict" class="text-2xl font-bold"></div>
              <div id="comment" class="text-xl"></div>
            </div>
          </div>

          <div class="mt-4 text-sm text-gray-600">
            Tip: Residents shout ingredients. You click Add. When ready, press <span class="font-bold">Stir & Rate</span>.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Reveal overlay -->
  <div id="overlay" class="overlay">
    <div class="text-center">
      <div class="text-white text-6xl sm:text-8xl font-black mb-4">üç≤ Stirring‚Ä¶</div>
      <div class="text-white text-3xl">The Magic Pot is thinking‚Ä¶</div>
    </div>
  </div>

  <script>
    // ---------- STATE ----------
    const ingredients = [];
    const listEl = document.getElementById('ingredientList');
    const chipLayer = document.getElementById('chipLayer');

    // Quick picks common to elders (swap/add later)
    const QUICK = [
      "Bread","Butter","Cheese","Eggs","Bacon","Ham","Chicken","Beef",
      "Rice","Pasta","Potatoes","Carrots","Peas","Green Beans",
      "Tomato","Onion","Garlic","Milk","Cream","Sugar","Salt","Pepper",
      "Ketchup","Mustard","Pickles","Mayonnaise","Hot Sauce",
      "Apples","Bananas","Peanut Butter","Jelly","Chocolate","Ice Cream"
    ];

    // ---------- UI ELEMENTS ----------
    const ingInput = document.getElementById('ingInput');
    const addBtn = document.getElementById('addBtn');
    const undoBtn = document.getElementById('undoBtn');
    const clearBtn = document.getElementById('clearBtn');
    const stirBtn = document.getElementById('stirBtn');
    const overlay = document.getElementById('overlay');
    const fullscreenBtn = document.getElementById('fullscreenBtn');

    const dishNameEl = document.getElementById('dishName');
    const scoreEl = document.getElementById('score');
    const verdictEl = document.getElementById('verdict');
    const commentEl = document.getElementById('comment');

    // ---------- HELPERS ----------
    function renderList(){
      listEl.innerHTML = '';
      ingredients.forEach((ing, i) => {
        const span = document.createElement('span');
        span.className = "pop inline-flex items-center gap-2 bg-blue-900 text-white rounded-xl px-3 py-2 text-lg font-bold";
        span.innerHTML = `<span>${ing}</span>`;
        listEl.appendChild(span);
      });
      renderChips();
    }

    function renderChips(){
      chipLayer.innerHTML = '';
      const w = chipLayer.clientWidth || 800;
      const h = chipLayer.clientHeight || 400;
      const max = Math.min(ingredients.length, 24);
      for (let i=0;i<max;i++){
        const t = document.createElement('div');
        t.textContent = ingredients[i];
        t.className = "absolute text-white/90 text-lg font-extrabold";
        const x = Math.random()*(w-160)+40;
        const y = Math.random()*(h-160)+40;
        t.style.left = x+"px"; t.style.top = y+"px";
        chipLayer.appendChild(t);
      }
    }

    function addIngredient(text){
      const t = text.trim();
      if (!t) return;
      ingredients.push(cap(t));
      ingInput.value = "";
      renderList();
    }

    function cap(s){ return s[0]?.toUpperCase() + s.slice(1); }

    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    // ---------- SILLY RATER (offline heuristic) ----------
    // Categorize by keywords
    const CATS = {
      sweet: ["sugar","honey","chocolate","ice cream","cake","cookie","jelly","jam","banana","apple","pie","pudding"],
      savory: ["cheese","ham","bacon","chicken","beef","pork","sausage","onion","garlic","broth","gravy","stock"],
      veg: ["lettuce","spinach","kale","cabbage","carrot","peas","beans","tomato","potato","pepper","pickle","pickles","cucumber","broccoli"],
      carb: ["bread","rice","pasta","noodles","tortilla","bun","flour","oats","cereal"],
      dairy: ["milk","cream","butter","yogurt","cheese","sour cream"],
      spicy: ["hot sauce","jalapeno","chili","chilli","cayenne","curry","wasabi"],
      weird: ["toothpaste","soap","lipstick","shoe","glitter","dirt","grass","battery","coin","socks","ketchup on cereal"]
    };

    function catOf(word){
      const w = word.toLowerCase();
      for (const [k,arr] of Object.entries(CATS)){
        if (arr.some(x => w.includes(x))) return k;
      }
      return "other";
    }

    function rateRecipe(list){
      if (list.length === 0) {
        return {
          score: 0,
          name: "Empty Pot Mystery",
          verdict: "No ingredients‚Ä¶ no dinner.",
          comment: "Add a few classics like bread, butter, and cheese."
        };
      }

      // Tally categories
      const tallies = {sweet:0,savory:0,veg:0,carb:0,dairy:0,spicy:0,weird:0,other:0};
      list.forEach(i => tallies[catOf(i)]++);

      // Base score from balance
      let score = 5;
      // Good combos
      if (tallies.carb && (tallies.savory || tallies.veg)) score += 2;      // carb + savory/veg
      if (tallies.dairy && (tallies.carb || tallies.savory)) score += 1.5;  // dairy complements
      if (tallies.sweet && tallies.dairy) score += 0.8;                      // dessert vibes
      if (tallies.veg >= 2) score += 0.7;

      // Penalties
      if (tallies.weird) score -= Math.min(4, tallies.weird*1.5);
      if (tallies.sweet && tallies.savory && (tallies.sweet >= 2) && (tallies.savory >= 2)) score -= 1.2; // clashy
      if (list.some(i => /fish|tuna|sardine/i.test(i)) && list.some(i => /chocolate|ice cream|cake/i.test(i))) score -= 2.5;
      if (list.some(i => /pickle/i.test(i)) && list.some(i => /ice cream|cake|pudding|custard/i.test(i))) score -= 1.8;

      // Size/chaos adjustments
      if (list.length >= 6) score -= 0.5;       // soups get messy
      if (list.length >= 10) score -= 1.0;      // chaos penalty

      // Clamp 0..10
      score = Math.max(0, Math.min(10, score));

      // Verdicts
      let verdict;
      if (score >= 8) verdict = "Chef‚Äôs Kiss! üçΩÔ∏è";
      else if (score >= 6) verdict = "Tasty! üòã";
      else if (score >= 4) verdict = "Hmm‚Ä¶ Edible. ü§î";
      else if (score >= 2) verdict = "Questionable‚Ä¶ üò¨";
      else verdict = "Emergency! üö´";

      // Comments (funny)
      const commentsGood = [
        "Balanced flavors ‚Äî this could actually work!",
        "Comfort-food energy. Grandma would approve.",
        "Nice combo! Serve with bread and smiles."
      ];
      const commentsMid = [
        "Not terrible, not great‚Ä¶ salt and butter might save it.",
        "Close! Swap one sweet thing for something savory.",
        "It needs a plan. Maybe make it a sandwich?"
      ];
      const commentsBad = [
        "This tastes like a dare. Please don‚Äôt.",
        "The pot is crying softly.",
        "Pairs best with‚Ä¶ the trash can. Kidding (sort of)."
      ];
      let comment;
      if (score >= 7.5) comment = pick(commentsGood);
      else if (score >= 4) comment = pick(commentsMid);
      else comment = pick(commentsBad);

      // Name generator
      const adj = ["Bayou","Sunday","Grandma‚Äôs","Homestyle","Moonlight","Festival","Sunny","Lucky","River","Front-Porch"];
      const forms = [
        "Stew","Surprise","Casserole","Skillet","Bake","Delight","Medley","Mix","Mash","Special"
      ];
      // Bias to soup/stew if liquidy
      let form = pick(forms);
      if (list.some(i => /soup|broth|stock|stew/i.test(i))) form = "Stew";
      const name = `${pick(adj)} ${form}`;

      return { score: Number(score.toFixed(1)), name, verdict, comment };
    }

    // ---------- EVENTS ----------
    addBtn.addEventListener('click', () => addIngredient(ingInput.value));
    ingInput.addEventListener('keydown', e => { if (e.key === 'Enter') addIngredient(ingInput.value) });

    undoBtn.addEventListener('click', () => { ingredients.pop(); renderList(); });
    clearBtn.addEventListener('click', () => { ingredients.length = 0; renderList(); });

    stirBtn.addEventListener('click', () => {
      overlay.classList.add('show');
      setTimeout(() => {
        overlay.classList.remove('show');
        const res = rateRecipe(ingredients);
        dishNameEl.textContent = `üç≤ ${res.name}`;
        scoreEl.textContent = `Score: ${res.score} / 10`;
        scoreEl.style.color = res.score >= 7.5 ? '#16a34a' : (res.score >= 4 ? '#ca8a04' : '#dc2626');
        verdictEl.textContent = res.verdict;
        commentEl.textContent = res.comment;
      }, 1200);
    });

    // Fullscreen
    fullscreenBtn.addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        fullscreenBtn.textContent = "Exit Full Screen";
      } else {
        document.exitFullscreen();
        fullscreenBtn.textContent = "‚õ∂ Full Screen";
      }
    });

    // Build quick pick buttons
    (function(){
      const row = document.getElementById('quickRow');
      QUICK.forEach(label => {
        const b = document.createElement('button');
        b.className = "px-3 py-2 rounded-xl bg-blue-100 text-blue-900 border-2 border-blue-300 hover:bg-blue-200 font-bold";
        b.textContent = label;
        b.addEventListener('click', () => addIngredient(label));
        row.appendChild(b);
      });
    })();

    // Initial render
    renderList();
  </script>
</body>
</html>

