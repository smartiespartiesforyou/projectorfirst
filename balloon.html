<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pop the Balloon â€” Word Guess</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-4xl font-bold text-blue-700 text-center mb-6">Pop the Balloon</h1>

    <!-- Controls Row -->
    <div class="grid md:grid-cols-3 gap-4 items-end mb-6">
      <!-- Theme -->
      <div>
        <label for="theme" class="block text-lg font-semibold text-blue-700 mb-2">Theme</label>
        <select id="theme"
                class="w-full text-xl p-3 border-2 border-blue-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="animals">Animals</option>
          <option value="countries">Countries</option>
          <option value="foods">Foods</option>
        </select>
      </div>

      <!-- New Word -->
      <div>
        <label class="block text-lg font-semibold text-blue-700 mb-2">New Round</label>
        <button id="newBtn"
                class="w-full bg-blue-600 hover:bg-blue-800 text-white text-xl py-3 px-6 rounded-2xl">
          New Word
        </button>
      </div>

      <!-- Help text -->
      <div class="md:text-right text-gray-700 text-lg">
        Guess letters. Wrong guesses pop balloons! ðŸŽˆ
      </div>
    </div>

    <!-- Balloons -->
    <div id="balloons"
         class="flex items-center justify-center gap-2 sm:gap-3 mb-6"
         aria-label="Remaining balloons">
      <!-- Balloons render here -->
    </div>

    <!-- Word display -->
    <div id="word"
         class="flex flex-wrap items-center justify-center gap-2 sm:gap-3 mb-6"
         aria-label="Hidden word">
      <!-- Letters render here -->
    </div>

    <!-- Feedback / Status -->
    <div id="status"
         class="text-center text-2xl font-semibold text-blue-700 mb-6"
         aria-live="polite"></div>

    <!-- Keyboard -->
    <div id="keyboard"
         class="grid grid-cols-7 sm:grid-cols-13 gap-2 max-w-4xl mx-auto"
         aria-label="Letter keyboard">
      <!-- Letter buttons render here -->
    </div>
  </div>

  <script>
    // =========================
    // WORD BANK (by theme)
    // =========================
    const BANK = {
      animals: [
        "ELEPHANT","KANGAROO","ALLIGATOR","PORCUPINE","CHAMELEON",
        "ARMADILLO","RHINOCEROS","HIPPOPOTAMUS","FLAMINGO","WOLVERINE"
      ],
      countries: [
        "ARGENTINA","VENEZUELA","AUSTRALIA","NETHERLANDS","PHILIPPINES",
        "SWITZERLAND","ZIMBABWE","KAZAKHSTAN","SINGAPORE","GUATEMALA"
      ],
      foods: [
        "SPAGHETTI","PINEAPPLE","CHOCOLATE","CROISSANT","BLUEBERRY",
        "WATERMELON","LASAGNA","CANNELLONI","MARSHMALLOW","ARTICHOKE"
      ],
    };

    // =========================
    // STATE
    // =========================
    const MAX_MISSES = 6;
    let theme = "animals";
    let word = "";
    let revealed = [];   // array of booleans per char
    let used = new Set();// guessed letters
    let misses = 0;
    let finished = false;

    // =========================
    // HELPERS
    // =========================
    function pickWord() {
      const list = BANK[theme];
      const choice = list[Math.floor(Math.random() * list.length)];
      return choice.toUpperCase();
    }

    function resetRound() {
      word = pickWord();
      revealed = Array.from(word, ch => (ch === " " || ch === "-" ? true : false));
      used.clear();
      misses = 0;
      finished = false;
      renderAll();
      setStatus("Guess a letter to begin!");
    }

    function setStatus(msg, color = "text-blue-700") {
      const el = document.getElementById("status");
      el.className = `text-center text-2xl font-semibold ${color} mb-6`;
      el.textContent = msg;
    }

    function renderBalloons() {
      const wrap = document.getElementById("balloons");
      wrap.innerHTML = "";
      const remaining = MAX_MISSES - misses;
      // show remaining balloons, then popped icons
      for (let i = 0; i < remaining; i++) {
        const span = document.createElement("span");
        span.textContent = "ðŸŽˆ";
        span.className = "text-4xl sm:text-5xl";
        wrap.appendChild(span);
      }
      for (let i = 0; i < misses; i++) {
        const span = document.createElement("span");
        span.textContent = "ðŸ’¥";
        span.className = "text-4xl sm:text-5xl";
        wrap.appendChild(span);
      }
    }

    function renderWord() {
      const wrap = document.getElementById("word");
      wrap.innerHTML = "";
      Array.from(word).forEach((ch, i) => {
        const box = document.createElement("div");
        // Keep spaces and dashes visible
        if (ch === " ") {
          box.className = "w-6 sm:w-8";
          box.textContent = " ";
        } else if (ch === "-") {
          box.className = "text-4xl sm:text-5xl font-bold text-gray-700";
          box.textContent = "-";
        } else {
          const shown = revealed[i];
          box.className = [
            "flex items-center justify-center",
            "h-14 sm:h-16 min-w-[3rem] sm:min-w-[3.5rem]",
            "px-3 rounded-2xl border-4",
            shown ? "border-green-600" : "border-blue-600",
            "bg-white"
          ].join(" ");
          box.innerHTML = `<span class="leading-none ${shown ? "text-4xl sm:text-5xl font-extrabold" : "text-3xl sm:text-4xl"}">
            ${shown ? ch : "_"}
          </span>`;
        }
        wrap.appendChild(box);
      });
    }

    function renderKeyboard() {
      const wrap = document.getElementById("keyboard");
      wrap.innerHTML = "";
      const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
      letters.forEach(letter => {
        const btn = document.createElement("button");
        const disabled = used.has(letter) || finished;
        btn.textContent = letter;
        btn.disabled = disabled;
        btn.className = [
          "py-3 sm:py-4",
          "rounded-2xl border-2",
          "text-xl sm:text-2xl font-semibold",
          disabled
            ? "bg-gray-200 text-gray-500 border-gray-300 cursor-not-allowed"
            : "bg-white text-gray-900 border-blue-600 hover:bg-blue-50",
          "focus:outline-none focus:ring-4 focus:ring-blue-300"
        ].join(" ");
        btn.addEventListener("click", () => handleGuess(letter));
        wrap.appendChild(btn);
      });
    }

    function handleGuess(letter) {
      if (finished || used.has(letter)) return;
      used.add(letter);

      // Check letter
      const indices = [];
      for (let i = 0; i < word.length; i++) {
        if (word[i] === letter) indices.push(i);
      }

      if (indices.length) {
        indices.forEach(i => (revealed[i] = true));
        setStatus(`âœ… Nice! The letter ${letter} is in the word.`, "text-green-700");
      } else {
        misses++;
        setStatus(`ðŸ’¥ Not there. Balloon popped! (${MAX_MISSES - misses} left)`, "text-red-700");
      }

      // Check win/lose
      if (revealed.every((v, i) => v || word[i] === " " || word[i] === "-")) {
        finished = true;
        setStatus("ðŸŽ‰ You saved the balloons! Word solved!", "text-green-700");
      } else if (misses >= MAX_MISSES) {
        finished = true;
        setStatus(`ðŸ’¥ All balloons popped! The word was ${word}.`, "text-red-700");
      }

      renderBalloons();
      renderWord();
      renderKeyboard();
    }

    function renderAll() {
      renderBalloons();
      renderWord();
      renderKeyboard();
    }

    // =========================
    // HOOK UP UI
    // =========================
    document.getElementById("theme").addEventListener("change", (e) => {
      theme = e.target.value;
      resetRound();
    });

    document.getElementById("newBtn").addEventListener("click", resetRound);

    // =========================
    // INIT
    // =========================
    resetRound();
  </script>
</body>
</html>
