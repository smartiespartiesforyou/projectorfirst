<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Word Scramble â€” ProjectorFirst</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>

  <!-- âœ… Memberstack Loader -->
  <script data-memberstack-app="app_cmgnwpg8y00x10suih4pua785"
          src="https://static.memberstack.com/scripts/v2/memberstack.js"
          type="text/javascript"></script>

  <!-- âœ… Protect this page -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const member = await window.$memberstackDom.getCurrentMember();
        if (!member.data) {
          window.location.href = "/subscribe.html";
        }
      } catch {
        window.location.href = "/subscribe.html";
      }
    });
  </script>

  <style>
    /* âœ… Ensures huge text always works in Tailwind CDN */
    .text-giant { font-size: 10rem; line-height: 1; }
  </style>
</head>

<body class="bg-white text-gray-900 min-h-screen">

  <div class="max-w-5xl mx-auto p-6 text-center">
    <!-- Title -->
    <h1 class="text-6xl font-extrabold mb-4 text-blue-900">Word Scramble</h1>

    <!-- Back Button -->
    <div class="flex justify-center mb-6">
      <a href="apps.html"
         class="inline-flex items-center gap-2 px-6 py-3 bg-blue-900 text-white rounded-xl font-extrabold text-xl shadow hover:bg-blue-800">
        â† Back to Apps
      </a>
    </div>

    <!-- Controls -->
    <div class="flex flex-col items-center gap-4 mb-10">
      <div class="flex flex-wrap gap-4 justify-center">

        <button id="newWordBtn"
                class="bg-blue-600 hover:bg-blue-800 text-white text-2xl py-3 px-8 rounded-2xl shadow">
          New Word
        </button>

        <button id="revealBtn"
                class="bg-white border-4 border-blue-900 text-blue-900 text-2xl py-3 px-8 rounded-2xl shadow hover:bg-gray-100">
          Reveal Answer
        </button>

        <div class="flex items-center gap-3">
          <label class="text-xl font-bold text-blue-900">Theme:</label>

          <select id="themeSelect"
                  class="border-2 border-blue-600 rounded-xl px-3 py-2 text-xl font-semibold text-blue-900">
            <option value="animals">ğŸ¶ Animals</option>
            <option value="food">ğŸ” Food</option>
            <option value="holidays">ğŸ„ Holidays</option>
            <option value="easy">ğŸ™‚ Easy Words</option>
          </select>
        </div>

      </div>
    </div>

    <!-- âœ… Scrambled Word (GIANT) -->
    <div id="scramble"
         class="text-giant font-black text-blue-900 tracking-widest my-10">
      Loading...
    </div>

    <!-- âœ… Answer -->
    <div id="answer"
         class="text-7xl font-black text-green-700 mt-14 hidden tracking-widest">
    </div>
  </div>

  <script>
    // âœ… Word banks
    const wordBanks = {
      animals: ["DOG","CAT","HORSE","BIRD","FISH","BEAR","LION","TIGER","MOUSE","SHEEP","COW","PIG"],
      food: ["PIZZA","BREAD","APPLE","CAKE","SOUP","RICE","GRAPE","FRIES","BURGER","COOKIE","MILK","CORN"],
      holidays: ["SANTA","TREE","TURKEY","GHOST","CANDY","RABBIT","FIREWORK","GIFT","LIGHTS","SNOW"],
      easy: ["SUN","MOON","CAR","BED","MAP","BOOK","CHAIR","BALL","SHOE","HAND","DOOR","CAKE"]
    };

    let currentTheme = "animals";
    let currentWord = "";

    function shuffleWord(word) {
      const arr = word.split("");
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr.join("");
    }

    function newWord() {
      const list = wordBanks[currentTheme];
      const rand = list[Math.floor(Math.random() * list.length)];
      currentWord = rand;

      document.getElementById("scramble").textContent = shuffleWord(rand);
      document.getElementById("answer").classList.add("hidden");
      document.getElementById("answer").textContent = rand;
    }

    function revealAnswer() {
      document.getElementById("answer").classList.remove("hidden");
    }

    document.getElementById("newWordBtn").addEventListener("click", newWord);
    document.getElementById("revealBtn").addEventListener("click", revealAnswer);
    document.getElementById("themeSelect").addEventListener("change", e => {
      currentTheme = e.target.value;
      newWord();
    });

    newWord();
  </script>

</body>
</html>
