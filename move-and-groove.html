<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üíÉ Move & Groove ‚Äî ProjectorFirst</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background: #fff;
      color: #111;
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 1rem;
    }
    .display-box {
      background: #000;
      color: #fff;
      font-size: clamp(2rem, 6vw, 3.5rem);
      font-weight: 700;
      padding: 2rem;
      border-radius: 1.25rem;
      margin-top: 1rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .big-btn {
      font-size: 1.75rem;
      font-weight: bold;
      padding: 1.25rem 2.5rem;
      border-radius: 1rem;
      cursor: pointer;
      transition: transform 0.1s;
    }
    .big-btn:hover { transform: scale(1.05); }
    .pf-blue { background: #1e3a8a; color: white; }
    .pf-blue:hover { background: #1d4ed8; }
  </style>
</head>

<body>
  <div class="max-w-6xl mx-auto flex justify-between items-center p-6 border-b border-gray-200">
    <a href="apps.html" class="pf-blue text-white text-xl font-bold px-5 py-3 rounded-xl hover:pf-blue">
      ‚Üê Back to Apps
    </a>

    <button id="openEditor" class="bg-purple-700 text-white text-xl font-bold px-6 py-3 rounded-xl hover:bg-purple-600">
      Movement Editor üìù
    </button>
  </div>

  <div id="categoryScreen" class="text-center mt-10 px-6 max-w-6xl mx-auto">
    <h1 class="text-4xl md:text-6xl font-extrabold text-blue-800 mb-10">Choose a Movement Theme</h1>
    <div id="categoryButtons" class="grid grid-cols-1 sm:grid-cols-2 gap-6 max-w-4xl mx-auto"></div>
  </div>

  <div id="gameScreen" class="text-center mt-16 px-4 hidden max-w-6xl mx-auto">
    <h1 id="categoryTitle" class="text-4xl md:text-6xl font-extrabold text-blue-800 mb-10"></h1>
    <div id="moveDisplay" class="display-box">Press ‚ÄúNext Move‚Äù to begin!</div>
    <button id="nextMoveBtn" class="big-btn pf-blue hover:pf-blue mt-10">Next Move</button>
    <div class="mt-10">
      <button id="backToThemes" class="bg-gray-500 hover:bg-gray-600 text-white font-bold px-6 py-3 rounded-xl">‚¨Ö Back to Themes</button>
    </div>
  </div>

  <!-- Modal Editor -->
  <div id="modalBg" class="fixed inset-0 bg-black/60 hidden justify-center items-center z-50">
    <div class="bg-white text-black rounded-2xl shadow-2xl p-8 max-w-2xl w-11/12 max-h-[85vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-blue-900">üìù Movement Editor</h2>
        <button id="closeEditor" class="bg-gray-300 px-4 py-2 rounded-xl font-bold hover:bg-gray-400">Close</button>
      </div>

      <label class="block text-lg font-semibold text-blue-900 mb-2">Select or Create Category</label>
      <select id="catSelect" class="w-full border-2 border-blue-900 rounded-2xl p-3 text-xl mb-3"></select>
      <input id="newCat" type="text" placeholder="Enter new category..." class="w-full border-2 border-blue-900 rounded-2xl p-3 text-xl mb-4 hidden"/>

      <label class="block text-lg font-semibold text-blue-900 mb-2">Add a New Move</label>
      <input id="newMove" type="text" placeholder="Enter a move..." class="w-full border-2 border-blue-900 rounded-2xl p-3 text-xl mb-3"/>
      <button id="addMove" class="bg-blue-900 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-800 mb-6">Add Move</button>

      <h3 class="text-2xl font-bold text-blue-800 mb-3">Saved Moves</h3>
      <ul id="moveList" class="space-y-2 max-h-[300px] overflow-y-auto"></ul>
    </div>
  </div>

  <script>
  let movesData = JSON.parse(localStorage.getItem("moveData")) || {
    Classic: [
      "Clap your hands 5 times.",
      "March in place for 10 seconds.",
      "Raise both arms up high.",
      "Tap your toes 10 times.",
      "Stomp your feet 6 times.",
      "Wave to a friend across the room.",
      "Reach forward like you‚Äôre grabbing a cookie.",
      "Reach up like you‚Äôre changing a lightbulb.",
      "Stretch your arms out to the sides like airplane wings.",
      "Bring your hands to your shoulders and back down (5 times).",
      "Make big circles with your shoulders (5 times).",
      "Shrug your shoulders up and down (6 times).",
      "Turn your head left‚Ä¶ then right (4 times).",
      "Nod your head yes (4 times).",
      "Sit up tall like a soldier.",
      "Take 3 deep breaths (in‚Ä¶ out‚Ä¶).",
      "Roll your wrists in circles (6 times).",
      "Open and close your hands like squeezing a sponge (10 times).",
      "Touch your right hand to your left knee (3 times).",
      "Touch your left hand to your right knee (3 times).",
      "Point to the ceiling, then point to the floor (5 times).",
      "Kick one foot out gently (5 times each side).",
      "Lift one knee up gently (5 times each side).",
      "Step to the right, step to the left (6 times).",
      "Heel digs: tap your heel forward (6 times each side).",
      "Toe taps: tap your toe forward (6 times each side).",
      "Pretend to drum on your knees (10 beats).",
      "Pretend to row a boat (8 pulls).",
      "Pretend to pull a rope (6 pulls).",
      "Pretend to push a heavy door (6 pushes).",
      "Make ‚Äújazz hands‚Äù and wiggle your fingers (8 seconds).",
      "Give yourself a big hug‚Ä¶ then open wide (4 times).",
      "Gently twist your body left‚Ä¶ then right (6 times).",
      "Reach down toward your toes (or knees) and sit back up (4 times).",
      "Lift your arms and make a big ‚ÄúY‚Äù shape.",
      "Make a big smile and lift your cheeks (yes, it counts!).",
      "Pretend to toss a ball gently (6 tosses).",
      "Pretend to wave a flag side to side (6 waves).",
      "Pretend to wipe a window in big circles (6 circles).",
      "Finish with hands on heart and one deep breath."
    ],
    Wheelchair: [
      "Pretend to brush your hair slowly (5 strokes).",
      "Pretend to wash your hands like at the sink (10 seconds).",
      "Open and close your hands like squeezing a sponge (10 times).",
      "Roll your shoulders forward (5 times).",
      "Roll your shoulders backward (5 times).",
      "Lift one arm up and bring it back down (5 times each arm).",
      "Reach forward like you‚Äôre grabbing something from a shelf.",
      "Reach across your body and touch the opposite arm.",
      "Make big circles with your wrists (6 times).",
      "Wiggle your fingers like you‚Äôre playing the piano.",
      "Push your hands forward like you‚Äôre pushing a shopping cart.",
      "Pull your hands back like you‚Äôre rowing a boat.",
      "Pretend to wipe a table in front of you (6 wipes).",
      "Pretend to polish a window in small circles.",
      "Tap your hands gently on your thighs (10 taps).",
      "Tap your heels on the floor (10 taps).",
      "Lift one foot slightly and set it back down (5 times each foot).",
      "Slide your feet forward and back (6 times).",
      "Turn your head left‚Ä¶ then right (4 times).",
      "Nod your head yes (4 times).",
      "Tilt your head toward your shoulder, then switch sides.",
      "Sit up tall like someone just took your picture.",
      "Take a deep breath in‚Ä¶ and slowly breathe out (3 times).",
      "Place one hand on your chest and feel your breathing.",
      "Give yourself a gentle hug‚Ä¶ then open your arms wide.",
      "Shrug your shoulders up and let them drop (6 times).",
      "Pretend to ring a doorbell with one finger (5 times each hand).",
      "Pretend to turn a doorknob (5 turns each hand).",
      "Pretend to hold a steering wheel and turn left‚Ä¶ then right.",
      "Point to the ceiling, then point to the floor (5 times).",
      "Make a big smile and lift your cheeks (it counts!).",
      "Pretend to wave at a parade.",
      "Pretend to fan yourself like it‚Äôs hot.",
      "Pretend to fold laundry on your lap.",
      "Pretend to peel an orange.",
      "Pretend to button a shirt.",
      "Pretend to zip a jacket up and down.",
      "Pretend to brush crumbs off your lap.",
      "Gently twist your upper body left‚Ä¶ then right.",
      "Finish with hands on heart and one deep breath."
    ]
  };

  const categoryButtons = document.getElementById("categoryButtons");
  const gameScreen = document.getElementById("gameScreen");
  const categoryScreen = document.getElementById("categoryScreen");
  const moveDisplay = document.getElementById("moveDisplay");
  const nextMoveBtn = document.getElementById("nextMoveBtn");
  const backToThemes = document.getElementById("backToThemes");

  const modalBg = document.getElementById("modalBg");
  const openEditor = document.getElementById("openEditor");
  const closeEditor = document.getElementById("closeEditor");
  const catSelect = document.getElementById("catSelect");
  const newCat = document.getElementById("newCat");
  const moveList = document.getElementById("moveList");
  const addMoveBtn = document.getElementById("addMove");
  const newMoveInput = document.getElementById("newMove");

  let currentCategory = null;
  let currentFiltered = [];

  function renderCategoryButtons() {
    categoryButtons.innerHTML = "";
    Object.keys(movesData).forEach(cat => {
      const btn = document.createElement("button");
      btn.className = "pf-blue hover:pf-blue text-white text-2xl md:text-3xl font-bold py-6 rounded-2xl transition-all";
      btn.textContent = cat;
      btn.onclick = () => startCategory(cat);
      categoryButtons.appendChild(btn);
    });
  }
  renderCategoryButtons();

  function startCategory(cat) {
    currentCategory = cat;
    currentFiltered = movesData[cat] || [];
    if (currentFiltered.length === 0) {
      alert("No moves in this theme yet! Add some in the Movement Editor.");
      return;
    }
    document.getElementById("categoryTitle").textContent = cat;
    categoryScreen.classList.add("hidden");
    gameScreen.classList.remove("hidden");
    showRandomMove();
  }

  function showRandomMove() {
    if (currentFiltered.length === 0) return;
    const random = Math.floor(Math.random() * currentFiltered.length);
    moveDisplay.textContent = currentFiltered[random];
  }

  nextMoveBtn.onclick = showRandomMove;

  backToThemes.onclick = () => {
    gameScreen.classList.add("hidden");
    categoryScreen.classList.remove("hidden");
  };

  openEditor.onclick = () => {
    modalBg.classList.remove("hidden");
    loadCategories();
  };
  closeEditor.onclick = () => modalBg.classList.add("hidden");

  function loadCategories() {
    catSelect.innerHTML = "";
    Object.keys(movesData).forEach(cat => {
      const opt = document.createElement("option");
      opt.value = cat;
      opt.textContent = cat;
      catSelect.appendChild(opt);
    });
    const addNew = document.createElement("option");
    addNew.value = "__NEW__";
    addNew.textContent = "+ Add New Category";
    catSelect.appendChild(addNew);
    loadMoves();
  }

  catSelect.onchange = () => {
    if (catSelect.value === "__NEW__") {
      newCat.classList.remove("hidden");
      moveList.innerHTML = "";
    } else {
      newCat.classList.add("hidden");
      loadMoves();
    }
  };

  function loadMoves() {
    const cat = catSelect.value;
    moveList.innerHTML = "";
    const list = movesData[cat] || [];
    if (list.length === 0) {
      moveList.innerHTML = "<p class='text-gray-500 italic'>No moves yet in this category.</p>";
      return;
    }
    list.forEach((move, i) => {
      const li = document.createElement("li");
      li.innerHTML = `
        <div class="flex justify-between bg-gray-100 p-3 rounded-xl items-center">
          <span class="text-lg">${move}</span>
          <button onclick="deleteMove('${cat}', ${i})"
            class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 ml-4 whitespace-nowrap">Delete</button>
        </div>`;
      moveList.appendChild(li);
    });
  }

  addMoveBtn.onclick = () => {
    let cat = catSelect.value;
    const move = newMoveInput.value.trim();
    if (!move) return alert("Enter a move first!");
    if (cat === "__NEW__") {
      cat = newCat.value.trim();
      if (!cat) return alert("Enter a category name!");
      movesData[cat] = [];
    }
    movesData[cat].push(move);
    localStorage.setItem("moveData", JSON.stringify(movesData));
    newMoveInput.value = "";
    newCat.value = "";
    newCat.classList.add("hidden");
    loadCategories();
    loadMoves();
    renderCategoryButtons();
  };

  window.deleteMove = function (cat, i) {
    movesData[cat].splice(i, 1);
    localStorage.setItem("moveData", JSON.stringify(movesData));
    loadMoves();
  };
</script>

</body>
</html>
