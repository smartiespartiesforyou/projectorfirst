<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Guess That Song ‚Äî ProjectorFirst</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Memberstack -->
  <script 
    data-memberstack-app="app_cmgnwpg8y00x10suih4pua785"
    src="https://static.memberstack.com/scripts/v2/memberstack.js">
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const m = await window.$memberstackDom.getCurrentMember();
        if (!m.data) window.location.href = "/subscribe.html";
      } catch {
        window.location.href = "/subscribe.html";
      }
    });
  </script>

  <style>
    .unselectable {
      user-select: none;
    }
  </style>
</head>

<body class="bg-white text-gray-900 min-h-screen unselectable">
  <div class="max-w-4xl mx-auto p-6 text-center">

    <!-- Title -->
    <h1 class="text-5xl font-extrabold text-blue-900 mb-6">
      Guess That Song
    </h1>

    <!-- Back Button -->
    <a href="apps.html"
       class="inline-block mb-8 px-6 py-3 bg-blue-900 text-white rounded-xl text-xl font-bold hover:bg-blue-800">
      ‚Üê Back to Apps
    </a>

    <!-- Song Area -->
    <div class="bg-blue-100 border-4 border-blue-900 rounded-2xl p-8 shadow-xl">
      <div id="status" class="text-3xl font-bold text-blue-900 mb-6">
        Press Play to Begin
      </div>

      <button id="playBtn"
              class="w-full py-6 text-4xl font-extrabold text-white bg-green-700 rounded-2xl hover:bg-green-800 mb-6">
        ‚ñ∂ Play Clip
      </button>

      <button id="revealBtn"
              class="w-full py-5 text-4xl font-extrabold text-blue-900 bg-white border-4 border-blue-900 rounded-2xl hover:bg-gray-50 mb-6">
        Reveal Answer
      </button>

      <button id="nextBtn"
              class="w-full py-5 text-4xl font-extrabold text-white bg-blue-700 rounded-2xl hover:bg-blue-800">
        Next Song ‚Üí
      </button>

      <div id="answer"
           class="text-5xl font-black text-green-700 mt-8 opacity-0 transition-opacity">
      </div>
    </div>
  </div>

  <audio id="audio"></audio>

  <script>
    // SONG LIST ‚Äî You upload these MP3s later
    const songs = [
      {
        title: "Amazing Grace",
        file: "amazing-grace.mp3"
      },
      {
        title: "When the Saints Go Marching In",
        file: "saints.mp3"
      },
      {
        title: "She‚Äôll Be Coming ‚ÄôRound the Mountain",
        file: "mountain.mp3"
      },
      {
        title: "You Are My Sunshine",
        file: "sunshine.mp3"
      }
    ];

    let index = 0;

    const audio = document.getElementById("audio");
    const status = document.getElementById("status");
    const playBtn = document.getElementById("playBtn");
    const revealBtn = document.getElementById("revealBtn");
    const nextBtn = document.getElementById("nextBtn");
    const answer = document.getElementById("answer");

    function loadSong(i) {
      const s = songs[i];
      audio.src = s.file;
      answer.textContent = s.title;
      answer.style.opacity = 0;
      status.textContent = "Press Play to Guess the Song";
    }

    playBtn.addEventListener("click", () => {
      audio.currentTime = 0;
      audio.play();
      status.textContent = "üéµ Listening‚Ä¶ Guess the song!";
      answer.style.opacity = 0;

      // Auto-stop after 6 seconds
      setTimeout(() => audio.pause(), 6000);
    });

    revealBtn.addEventListener("click", () => {
      answer.style.opacity = 1;
    });

    nextBtn.addEventListener("click", () => {
      index = (index + 1) % songs.length;
      loadSong(index);
    });

    loadSong(index);
  </script>

</body>
</html>
