<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Memory Match (4√ó4)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">

  <div class="max-w-6xl mx-auto p-6">
    <!-- Title + Back to Apps (Bingo/Dice style) -->
    <h1 class="text-5xl font-extrabold mb-4 text-blue-900 text-center">Memory Match</h1>
    <a href="apps.html"
       class="inline-flex items-center gap-2 px-6 py-3 bg-blue-900 text-white rounded-xl font-extrabold text-xl shadow hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 mb-6">
      ‚Üê Back to Apps
    </a>

    <div class="flex items-center justify-center gap-4 mb-6">
      <button id="resetBtn"
              class="bg-blue-600 hover:bg-blue-800 text-white text-xl py-3 px-6 rounded-2xl">
        New Game
      </button>
      <span class="text-lg text-gray-700">Call out coordinates like <span class="font-semibold">B3 and D2</span></span>
    </div>

    <!-- GRID -->
    <div id="grid"
         class="grid grid-cols-2 sm:grid-cols-4 gap-5 max-w-5xl mx-auto"
         aria-label="Memory grid">
      <!-- Cards will be injected here -->
    </div>

    <!-- Status -->
    <div id="status" class="text-center mt-6 text-2xl font-semibold text-blue-700"></div>
  </div>

  <script>
    // ===== SETTINGS =====
    const rows = ["A","B","C","D"]; 
    const cols = [1,2,3,4];         
    const totalPairs = 8;           

    // Instead of emojis, just numbers 1‚Äì8
    const numberPool = Array.from({ length: totalPairs }, (_, i) => i + 1);

    // ===== STATE =====
    let firstCard = null;
    let secondCard = null;
    let busy = false;
    let matchesFound = 0;
    let deck = [];

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function buildDeck() {
      const picks = shuffle([...numberPool]);
      const pairDeck = shuffle([...picks, ...picks]);
      const coords = [];
      rows.forEach(r => cols.forEach(c => coords.push(`${r}${c}`)));
      return coords.map((coord, i) => ({ coord, value: pairDeck[i], matched: false }));
    }

    function renderGrid() {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      deck.forEach((card, idx) => {
        const btn = document.createElement("button");
        btn.className = [
          "relative aspect-square w-full",
          "rounded-2xl border-[6px] border-blue-600",
          "bg-white focus:outline-none focus:ring-4 focus:ring-blue-300",
          "flex items-center justify-center"
        ].join(" ");
        btn.setAttribute("aria-label", `Card ${card.coord}`);
        btn.dataset.index = idx;

        // Back (coordinate label)
        const back = document.createElement("div");
        back.className = "back absolute inset-0 flex items-center justify-center";
        back.innerHTML = `<span class="text-4xl sm:text-5xl font-extrabold text-blue-700">${card.coord}</span>`;

        // Front (number side) ‚Äî really big
        const front = document.createElement("div");
        front.className = "front absolute inset-0 hidden items-center justify-center";
        front.innerHTML = `<span class="leading-none text-[5.5rem] sm:text-[7rem] md:text-[8.5rem] lg:text-[10rem] font-black text-blue-900">${card.value}</span>`;

        if (card.matched) {
          front.classList.remove("hidden");
          btn.classList.add("border-green-600");
        }

        btn.appendChild(back);
        btn.appendChild(front);
        btn.addEventListener("click", () => handleFlip(btn));
        grid.appendChild(btn);
      });
    }

    function showFront(btn, show) {
      const front = btn.querySelector(".front");
      const back  = btn.querySelector(".back");
      if (show) {
        front.classList.remove("hidden");
        back.classList.add("hidden");
      } else {
        front.classList.add("hidden");
        back.classList.remove("hidden");
      }
    }

    function handleFlip(btn) {
      if (busy) return;
      const i = parseInt(btn.dataset.index, 10);
      const card = deck[i];
      if (card.matched) return;

      const frontVisible = !btn.querySelector(".front").classList.contains("hidden");
      if (frontVisible) return;

      showFront(btn, true);

      if (!firstCard) {
        firstCard = { btn, i, card };
        btn.classList.add("ring-4","ring-blue-300");
      } else if (!secondCard && btn !== firstCard.btn) {
        secondCard = { btn, i, card };
        busy = true;
        checkMatch();
      }
    }

    function checkMatch() {
      const status = document.getElementById("status");
      const isMatch = firstCard.card.value === secondCard.card.value;

      if (isMatch) {
        deck[firstCard.i].matched = true;
        deck[secondCard.i].matched = true;
        firstCard.btn.classList.remove("ring-4","ring-blue-300");
        secondCard.btn.classList.remove("ring-4","ring-blue-300");
        firstCard.btn.classList.add("border-green-600");
        secondCard.btn.classList.add("border-green-600");
        matchesFound += 1;
        status.textContent = `Matched! Pairs found: ${matchesFound} / ${totalPairs}`;
        resetTurn();
        if (matchesFound === totalPairs) {
          status.textContent = "üéâ All pairs matched! Great memory!";
        }
      } else {
        status.textContent = "Not a match‚Ä¶ flipping back.";
        setTimeout(() => {
          showFront(firstCard.btn, false);
          showFront(secondCard.btn, false);
          firstCard.btn.classList.remove("ring-4","ring-blue-300");
          secondCard.btn.classList.remove("ring-4","ring-blue-300");
          resetTurn();
        }, 1300);
      }
    }

    function resetTurn() {
      firstCard = null;
      secondCard = null;
      busy = false;
    }

    function newGame() {
      matchesFound = 0;
      deck = buildDeck();
      renderGrid();
      document.getElementById("status").textContent = "Pick two cards to begin!";
    }

    document.getElementById("resetBtn").addEventListener("click", newGame);

    newGame();
  </script>
</body>
</html>
