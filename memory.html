<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Memory Match (4×4)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">

  <div class="max-w-6xl mx-auto p-6">
    <!-- Title -->
    <h1 class="text-5xl font-extrabold mb-4 text-blue-900 text-center">Memory Match</h1>
    <!-- Centered Back to Apps -->
    <div class="flex justify-center mb-6">
      <a href="apps.html"
         class="inline-flex items-center gap-2 px-6 py-3 bg-blue-900 text-white rounded-xl font-extrabold text-xl shadow hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300">
        ← Back to Apps
      </a>
    </div>

    <!-- Controls -->
    <div class="flex flex-col items-center gap-4 mb-6">
      <div class="flex flex-wrap gap-3 justify-center">
        <button id="resetBtn"
                class="bg-blue-600 hover:bg-blue-800 text-white text-xl py-3 px-6 rounded-2xl">
          New Game
        </button>
        <label for="themeSelect" class="text-lg font-bold text-blue-900 self-center">Theme:</label>
        <select id="themeSelect"
                class="border-2 border-blue-600 rounded-xl px-3 py-2 text-lg font-semibold text-blue-900">
          <option value="animals">🐶 Animals</option>
          <option value="food">🍔 Food</option>
          <option value="sports">⚽ Sports</option>
          <option value="christmas">🎄 Christmas</option>
          <option value="halloween">🎃 Halloween</option>
          <option value="thanksgiving">🦃 Thanksgiving</option>
          <option value="newyear">🎆 New Year</option>
          <option value="easter">🐣 Easter</option>
          <option value="stpatricks">☘️ St. Patrick’s</option>
        </select>
      </div>
      <span class="text-lg text-gray-700">Flip two cards — find the pairs!</span>
    </div>

    <!-- GRID -->
    <div id="grid"
         class="grid grid-cols-2 sm:grid-cols-4 gap-5 max-w-5xl mx-auto"
         aria-label="Memory grid">
    </div>

    <!-- Status -->
    <div id="status" class="text-center mt-6 text-2xl font-semibold text-blue-700"></div>
  </div>

  <script>
    // ===== SETTINGS =====
    const totalPairs = 8; // 16 cards

    // THEMES
    const themes = {
      animals: ["🐶","🐱","🦁","🐸","🐢","🐰","🐼","🐧","🦊","🐻","🐨","🐷"],
      food: ["🍔","🍕","🍟","🌭","🍩","🍪","🍦","🍎","🍌","🥑","🍇","🍓"],
      sports: ["⚽","🏀","🏈","⚾","🎾","🏐","🥎","🏒","🥊","⛳","🏓","🥏"],
      christmas: ["🎄","🎅","🤶","🦌","🎁","⛄","❄️","🔔","🕯️","🍪","🌟","🥛"],
      halloween: ["🎃","👻","🕷️","🕸️","🧛","🧟","🦇","🍬","🍭","☠️","⚰️","🧙"],
      thanksgiving: ["🦃","🥧","🍂","🌽","🥔","🍞","🍗","🍎","🍷","🍴"],
      newyear: ["🎆","🎇","🥂","🍾","🎉","🕛","🎊","🪩"],
      easter: ["🐣","🐰","🥚","🌸","🧺","🍫","🌼","🐥"],
      stpatricks: ["☘️","🍀","🍺","🌈","💰","🪙","🎩","🐑"]
    };

    // ===== STATE =====
    let currentTheme = "animals";
    let firstCard = null;
    let secondCard = null;
    let busy = false;
    let matchesFound = 0;
    let deck = [];

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function buildDeck() {
      let pool = [...themes[currentTheme]];
      if (pool.length < totalPairs) pool = [...pool, ...pool];
      const picks = shuffle(pool).slice(0, totalPairs);
      const pairDeck = shuffle([...picks, ...picks]);
      return pairDeck.map((val, i) => ({ id: i + 1, value: val, matched: false }));
    }

    function renderGrid() {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      deck.forEach((card, idx) => {
        const btn = document.createElement("button");
        btn.className = [
          "relative aspect-square w-full",
          "rounded-2xl border-[6px] border-blue-600",
          "bg-white focus:outline-none focus:ring-4 focus:ring-blue-300",
          "flex items-center justify-center"
        ].join(" ");
        btn.dataset.index = idx;

        // Back = giant card number
        const back = document.createElement("div");
        back.className = "back absolute inset-0 flex items-center justify-center";
        back.innerHTML = `<span class="leading-none text-[6rem] sm:text-[7rem] md:text-[8rem] lg:text-[9rem] font-extrabold text-blue-700">${card.id}</span>`;

        // Front = theme content
        const front = document.createElement("div");
        front.className = "front absolute inset-0 hidden items-center justify-center";
        const content = `<span class="leading-none text-[5.5rem] sm:text-[7rem] md:text-[8.5rem] lg:text-[10rem]">${card.value}</span>`;
        front.innerHTML = content;

        if (card.matched) {
          front.classList.remove("hidden");
          btn.classList.add("border-green-600");
        }

        btn.appendChild(back);
        btn.appendChild(front);
        btn.addEventListener("click", () => handleFlip(btn));
        grid.appendChild(btn);
      });
    }

    function showFront(btn, show) {
      const front = btn.querySelector(".front");
      const back  = btn.querySelector(".back");
      if (show) {
        front.classList.remove("hidden");
        back.classList.add("hidden");
      } else {
        front.classList.add("hidden");
        back.classList.remove("hidden");
      }
    }

    function handleFlip(btn) {
      if (busy) return;
      const i = parseInt(btn.dataset.index, 10);
      const card = deck[i];
      if (card.matched) return;
      const frontVisible = !btn.querySelector(".front").classList.contains("hidden");
      if (frontVisible) return;
      showFront(btn, true);
      if (!firstCard) {
        firstCard = { btn, i, card };
        btn.classList.add("ring-4","ring-blue-300");
      } else if (!secondCard && btn !== firstCard.btn) {
        secondCard = { btn, i, card };
        busy = true;
        checkMatch();
      }
    }

    function checkMatch() {
      const status = document.getElementById("status");
      const isMatch = firstCard.card.value === secondCard.card.value;
      if (isMatch) {
        deck[firstCard.i].matched = true;
        deck[secondCard.i].matched = true;
        firstCard.btn.classList.remove("ring-4","ring-blue-300");
        secondCard.btn.classList.remove("ring-4","ring-blue-300");
        firstCard.btn.classList.add("border-green-600");
        secondCard.btn.classList.add("border-green-600");
        matchesFound += 1;
        status.textContent = `Matched! Pairs found: ${matchesFound} / ${totalPairs}`;
        resetTurn();
        if (matchesFound === totalPairs) {
          status.textContent = "🎉 All pairs matched! Great memory!";
        }
      } else {
        status.textContent = "Not a match… flipping back.";
        setTimeout(() => {
          showFront(firstCard.btn, false);
          showFront(secondCard.btn, false);
          firstCard.btn.classList.remove("ring-4","ring-blue-300");
          secondCard.btn.classList.remove("ring-4","ring-blue-300");
          resetTurn();
        }, 1300);
      }
    }

    function resetTurn() {
      firstCard = null;
      secondCard = null;
      busy = false;
    }

    function newGame() {
      matchesFound = 0;
      deck = buildDeck();
      renderGrid();
      document.getElementById("status").textContent = "Pick two cards to begin!";
    }

    document.getElementById("resetBtn").addEventListener("click", newGame);
    document.getElementById("themeSelect").addEventListener("change", e => {
      currentTheme = e.target.value;
      newGame();
    });

    newGame();
  </script>
</body>
</html>
