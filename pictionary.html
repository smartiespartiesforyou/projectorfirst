<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ProjectorFirst — Pictionary</title>
  <meta name="description" content="High-contrast Pictionary for seniors: large buttons, bold images, timer, keyboard shortcuts." />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Ultra-simple, projector-friendly theme */
    :root {
      --bg: #ffffff;
      --fg: #000000;
      --accent: #111111;
    }
    body { background: var(--bg); color: var(--fg); }
    .btn {
      @apply text-2xl md:text-3xl font-bold px-5 py-4 rounded-2xl shadow;
      background: var(--fg); color: var(--bg);
    }
    .btn-outline {
      @apply text-2xl md:text-3xl font-bold px-5 py-4 rounded-2xl border-4;
      border-color: var(--fg); color: var(--fg); background: transparent;
    }
    .card {
      @apply rounded-3xl p-4 md:p-8 shadow;
      border: 6px solid var(--fg);
      background: var(--bg);
    }
    /* “Bolden” PNG line art: stack drop-shadows to thicken strokes visually */
    .bold-lines {
      filter:
        drop-shadow(0 0 1px #000)
        drop-shadow(0 0 1px #000)
        drop-shadow(0 0 1.5px #000)
        contrast(140%);
      /* Prevent browser from blurring on scale-up */
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
      image-rendering: pixelated;
    }
    .timer {
      font-variant-numeric: tabular-nums;
    }
    .kbd {
      @apply border-2 rounded-lg px-2 py-0.5 text-xl font-bold;
      border-color: var(--fg);
    }
    .hidden-word {
      @apply text-5xl md:text-6xl font-black tracking-wide;
      color: var(--bg);
      text-shadow: 0 0 12px var(--bg);
      user-select: none;
    }
  </style>
</head>
<body class="min-h-screen">
  <main class="max-w-6xl mx-auto p-4 md:p-8 space-y-6">

    <!-- Header -->
    <header class="flex items-center justify-between gap-4">
      <h1 class="text-4xl md:text-5xl font-extrabold">Pictionary</h1>
      <div class="flex gap-3">
        <button id="fullscreenBtn" class="btn-outline" title="F">Fullscreen</button>
        <button id="contrastBtn" class="btn-outline" title="C">Invert</button>
      </div>
    </header>

    <!-- Display -->
    <section class="grid md:grid-cols-2 gap-6">
      <div class="card flex items-center justify-center">
        <img id="pic"
             class="bold-lines max-h-[65vh] w-auto mx-auto"
             alt="Pictionary image"
             src=""
             draggable="false" />
      </div>

      <div class="card flex flex-col justify-between gap-6">
        <div class="space-y-4">
          <div class="text-6xl md:text-7xl font-black timer text-center" id="timer">01:00</div>
          <div class="text-center">
            <button id="startStopBtn" class="btn mr-3" title="S">Start</button>
            <button id="resetBtn" class="btn-outline" title="R">Reset</button>
          </div>
          <div class="flex justify-center gap-3">
            <button data-min="30" class="btn-outline timeBtn">30s</button>
            <button data-min="60" class="btn-outline timeBtn">60s</button>
            <button data-min="90" class="btn-outline timeBtn">90s</button>
            <button data-min="120" class="btn-outline timeBtn">120s</button>
          </div>
        </div>

        <div class="space-y-3 text-center">
          <div id="word" class="hidden-word select-none">•••••</div>
          <div class="flex flex-wrap justify-center gap-3">
            <button id="peekBtn" class="btn" title="W">Reveal Word</button>
            <button id="nextBtn" class="btn" title="N">Next</button>
            <button id="shuffleBtn" class="btn-outline" title="H">Shuffle Deck</button>
          </div>
          <p class="text-xl md:text-2xl opacity-80">
            Shortcuts:
            <span class="kbd">N</span> next,
            <span class="kbd">W</span> reveal word,
            <span class="kbd">S</span> start/pause,
            <span class="kbd">R</span> reset,
            <span class="kbd">F</span> fullscreen,
            <span class="kbd">C</span> invert.
          </p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center text-xl md:text-2xl opacity-70">
      Images: bold-lined, high-contrast for projector use.
    </footer>
  </main>

  <script>
    // === Image Deck ===========================================================
    // Put these PNGs into ./images/ with these exact names.
    // You can add more; just push another {word, src} entry.
    const deck = [
      { word: "Book",       src: "images/book.png" },
      { word: "Lips",       src: "images/lips.png" },
      { word: "Calculator", src: "images/calculator.png" },
      { word: "Swing",      src: "images/swing.png" },
      { word: "Corn",       src: "images/corn.png" },
      { word: "Boot",       src: "images/boot.png" },
      { word: "Pineapple",  src: "images/pineapple.png" },
    ];

    // === State ================================================================
    let order = [...deck.keys()];
    let index = -1;
    let peekVisible = false;

    // Timer
    let duration = 60;      // seconds
    let remaining = duration;
    let ticking = false;
    let tickHandle = null;

    // === Elements =============================================================
    const imgEl       = document.getElementById("pic");
    const wordEl      = document.getElementById("word");
    const nextBtn     = document.getElementById("nextBtn");
    const peekBtn     = document.getElementById("peekBtn");
    const shuffleBtn  = document.getElementById("shuffleBtn");
    const timerEl     = document.getElementById("timer");
    const startStopBtn= document.getElementById("startStopBtn");
    const resetBtn    = document.getElementById("resetBtn");
    const timeBtns    = document.querySelectorAll(".timeBtn");
    const fsBtn       = document.getElementById("fullscreenBtn");
    const contrastBtn = document.getElementById("contrastBtn");

    // === Utilities ============================================================
    function zfill(n) { return n.toString().padStart(2,"0"); }
    function formatTime(sec){
      const m = Math.floor(sec/60), s = sec%60;
      return `${zfill(m)}:${zfill(s)}`;
    }
    function setTimer(sec) {
      remaining = sec;
      timerEl.textContent = formatTime(remaining);
    }
    function startTimer(){
      if (ticking) return;
      ticking = true;
      startStopBtn.textContent = "Pause";
      tickHandle = setInterval(() => {
        remaining = Math.max(0, remaining - 1);
        timerEl.textContent = formatTime(remaining);
        if (remaining === 0) stopTimer();
      }, 1000);
    }
    function stopTimer(){
      ticking = false;
      startStopBtn.textContent = "Start";
      clearInterval(tickHandle);
    }
    function resetTimer(){
      stopTimer();
      setTimer(duration);
    }

    function shuffle() {
      order = [...deck.keys()];
      // Fisher-Yates
      for (let i = order.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [order[i], order[j]] = [order[j], order[i]];
      }
      index = -1;
    }

    function showNext() {
      index = (index + 1) % order.length;
      const item = deck[order[index]];
      imgEl.src = item.src;
      imgEl.alt = item.word;
      hideWord();
    }

    function showWord() {
      const item = deck[order[index]] || null;
      if (!item) return;
      wordEl.textContent = item.word.toUpperCase();
      wordEl.classList.remove("hidden-word");
      peekVisible = true;
    }
    function hideWord() {
      wordEl.textContent = "•••••";
      wordEl.classList.add("hidden-word");
      peekVisible = false;
    }

    // === Events ===============================================================
    nextBtn.addEventListener("click", showNext);
    shuffleBtn.addEventListener("click", () => { shuffle(); showNext(); });

    peekBtn.addEventListener("click", () => {
      if (!peekVisible) {
        showWord();
        // Auto-hide after 3 seconds so only the drawer gets the hint
        setTimeout(() => hideWord(), 3000);
      } else {
        hideWord();
      }
    });

    startStopBtn.addEventListener("click", () => ticking ? stopTimer() : startTimer());
    resetBtn.addEventListener("click", resetTimer);
    timeBtns.forEach(b => b.addEventListener("click", () => {
      duration = parseInt(b.dataset.min, 10);
      resetTimer();
    }));

    fsBtn.addEventListener("click", () => {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    });

    // Invert for dark rooms / extra contrast (flips colors)
    let inverted = false;
    contrastBtn.addEventListener("click", () => {
      inverted = !inverted;
      document.documentElement.style.filter = inverted ? "invert(100%) hue-rotate(180deg)" : "none";
    });

    // Keyboard shortcuts
    window.addEventListener("keydown", (e) => {
      const k = e.key.toLowerCase();
      if (k === "n") { showNext(); }
      else if (k === "w") { peekBtn.click(); }
      else if (k === "s") { startStopBtn.click(); }
      else if (k === "r") { resetBtn.click(); }
      else if (k === "f") { fsBtn.click(); }
      else if (k === "c") { contrastBtn.click(); }
    });

    // === Boot ================================================================
    shuffle();
    setTimer(duration);
    showNext();
  </script>
</body>
</html>
