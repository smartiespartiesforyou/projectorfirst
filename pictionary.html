<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Pictionary â€” Piece by Piece Reveal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-4xl font-bold text-blue-700 text-center mb-6">Pictionary â€” Reveal Mode</h1>

    <!-- Back to Apps -->
    <div class="mb-6 text-center">
      <a href="apps.html" class="px-6 py-3 bg-blue-600 hover:bg-blue-800 text-white text-xl rounded-2xl">â¬… Back to Apps</a>
    </div>

    <!-- Controls -->
    <div class="grid md:grid-cols-3 gap-4 items-end mb-6">
      <div>
        <label for="theme" class="block text-lg font-semibold text-blue-700 mb-2">Theme</label>
        <select id="theme"
                class="w-full text-xl p-3 border-2 border-blue-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="animals">Animals</option>
          <option value="foods">Foods</option>
          <option value="objects">Objects</option>
        </select>
      </div>
      <div>
        <label class="block text-lg font-semibold text-blue-700 mb-2">New Picture</label>
        <button id="newBtn"
                class="w-full bg-blue-600 hover:bg-blue-800 text-white text-xl py-3 px-6 rounded-2xl">
          New Picture
        </button>
      </div>
      <div class="flex md:justify-end gap-3">
        <button id="revealOne"
                class="flex-1 md:flex-none bg-green-600 hover:bg-green-800 text-white text-xl py-3 px-6 rounded-2xl">
          Reveal One
        </button>
        <button id="revealAll"
                class="flex-1 md:flex-none bg-amber-500 hover:bg-amber-600 text-white text-xl py-3 px-6 rounded-2xl">
          Reveal All
        </button>
      </div>
    </div>

    <!-- Board -->
    <div class="relative mx-auto aspect-square w-full max-w-3xl rounded-2xl border-4 border-blue-600 overflow-hidden bg-gray-100">
      <!-- Hidden picture -->
      <div id="picture" class="absolute inset-0 flex items-center justify-center select-none text-[60vmin] leading-none"></div>

      <!-- Tile grid overlay -->
      <div id="tiles" class="absolute inset-0 grid grid-cols-4 grid-rows-4 gap-0"></div>
    </div>

    <!-- Status -->
    <div id="status" class="text-center mt-6 text-2xl font-semibold text-blue-700"></div>
  </div>

  <script>
    const BANK = {
      animals: [
        {emoji:"ğŸ¦’", name:"GIRAFFE"},
        {emoji:"ğŸ¦“", name:"ZEBRA"},
        {emoji:"ğŸ˜", name:"ELEPHANT"},
        {emoji:"ğŸ¦Š", name:"FOX"},
        {emoji:"ğŸ¦‰", name:"OWL"},
        {emoji:"ğŸ¼", name:"PANDA"},
        {emoji:"ğŸ¦", name:"GORILLA"},
        {emoji:"ğŸ¦˜", name:"KANGAROO"},
        {emoji:"ğŸ¦", name:"RHINOCEROS"},
        {emoji:"ğŸ¦”", name:"HEDGEHOG"}
      ],
      foods: [
        {emoji:"ğŸ", name:"PINEAPPLE"},
        {emoji:"ğŸ¥", name:"CROISSANT"},
        {emoji:"ğŸ‰", name:"WATERMELON"},
        {emoji:"ğŸ‡", name:"GRAPES"},
        {emoji:"ğŸ§€", name:"CHEESE"},
        {emoji:"ğŸ“", name:"STRAWBERRY"},
        {emoji:"ğŸ”", name:"HAMBURGER"},
        {emoji:"ğŸ£", name:"SUSHI"},
        {emoji:"ğŸ¥¨", name:"PRETZEL"},
        {emoji:"ğŸ†", name:"EGGPLANT"}
      ],
      objects: [
        {emoji:"â›º", name:"TENT"},
        {emoji:"ğŸš²", name:"BICYCLE"},
        {emoji:"ğŸ•°ï¸", name:"CLOCK"},
        {emoji:"ğŸ’", name:"BACKPACK"},
        {emoji:"ğŸ§¯", name:"FIRE EXTINGUISHER"},
        {emoji:"ğŸ§²", name:"MAGNET"},
        {emoji:"ğŸ§³", name:"SUITCASE"},
        {emoji:"ğŸ”­", name:"TELESCOPE"},
        {emoji:"ğŸ§µ", name:"THREAD"},
        {emoji:"ğŸ§±", name:"BRICK"}
      ]
    };

    let theme = "animals";
    let item = null;
    let covered = [];
    const totalTiles = 16;

    function randPick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function setStatus(msg, color="text-blue-700") {
      const el = document.getElementById("status");
      el.className = `text-center mt-6 text-2xl font-semibold ${color}`;
      el.textContent = msg;
    }

    function renderPicture() {
      document.getElementById("picture").textContent = item.emoji;
    }

    function renderTiles() {
      const wrap = document.getElementById("tiles");
      wrap.innerHTML = "";
      covered = Array(totalTiles).fill(true);
      for (let i = 0; i < totalTiles; i++) {
        const btn = document.createElement("button");
        btn.className = "tile bg-blue-700 hover:bg-blue-800 text-white border border-blue-900 flex items-center justify-center text-5xl font-extrabold";
        btn.textContent = i + 1; // Just numbers 1â€“16
        btn.dataset.index = i;
        btn.addEventListener("click", () => revealTile(i, btn));
        wrap.appendChild(btn);
      }
      updateStatus();
    }

    function revealTile(i, btn) {
      if (!covered[i]) return;
      covered[i] = false;
      btn.remove(); // Remove THIS button, not by index lookup
      updateStatus();
      if (covered.every(v => v === false)) {
        setStatus(`ğŸ‰ All tiles revealed â€” Answer: ${item.name}`, "text-green-700");
      }
    }

    function revealOneRandom() {
      const remaining = covered.map((v,i)=>v?i:-1).filter(i=>i!==-1);
      if (!remaining.length) return;
      const pick = randPick(remaining);
      const btn = document.querySelector(`.tile[data-index="${pick}"]`);
      if (btn) revealTile(pick, btn);
    }

    function revealAll() {
      document.querySelectorAll(".tile").forEach(btn => btn.remove());
      covered = Array(totalTiles).fill(false);
      setStatus(`ğŸ‰ All tiles revealed â€” Answer: ${item.name}`, "text-green-700");
    }

    function updateStatus() {
      const left = covered.filter(Boolean).length;
      setStatus(`Tiles left: ${left} / ${totalTiles}`);
    }

    function newPicture() {
      item = randPick(BANK[theme]);
      renderPicture();
      renderTiles();
    }

    document.getElementById("theme").addEventListener("change", e => {
      theme = e.target.value;
      newPicture();
    });
    document.getElementById("newBtn").addEventListener("click", newPicture);
    document.getElementById("revealOne").addEventListener("click", revealOneRandom);
    document.getElementById("revealAll").addEventListener("click", revealAll);

    // Init
    newPicture();
  </script>
</body>
</html>
