<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Pictionary ‚Äî Piece by Piece Reveal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-4xl font-bold text-blue-700 text-center mb-6">Pictionary ‚Äî Reveal Mode</h1>

    <!-- Back to Apps -->
    <div class="mb-6 text-center">
      <a href="apps.html" class="px-6 py-3 bg-blue-600 hover:bg-blue-800 text-white text-xl rounded-2xl">‚¨Ö Back to Apps</a>
    </div>

    <!-- Controls -->
    <div class="grid md:grid-cols-3 gap-4 items-end mb-6">
      <div>
        <label for="theme" class="block text-lg font-semibold text-blue-700 mb-2">Theme</label>
        <select id="theme"
                class="w-full text-xl p-3 border-2 border-blue-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="animals">Animals</option>
          <option value="foods">Foods</option>
          <option value="objects">Objects</option>
        </select>
      </div>
      <div>
        <label class="block text-lg font-semibold text-blue-700 mb-2">New Picture</label>
        <button id="newBtn"
                class="w-full bg-blue-600 hover:bg-blue-800 text-white text-xl py-3 px-6 rounded-2xl">
          New Picture
        </button>
      </div>
      <div class="flex md:justify-end gap-3">
        <button id="revealOne"
                class="flex-1 md:flex-none bg-green-600 hover:bg-green-800 text-white text-xl py-3 px-6 rounded-2xl">
          Reveal One
        </button>
        <button id="revealAll"
                class="flex-1 md:flex-none bg-amber-500 hover:bg-amber-600 text-white text-xl py-3 px-6 rounded-2xl">
          Reveal All
        </button>
      </div>
    </div>

    <!-- Board -->
    <div class="relative mx-auto aspect-square w-full max-w-3xl rounded-2xl border-4 border-blue-600 overflow-hidden bg-gray-100">
      <!-- Hidden picture -->
      <div id="picture" class="absolute inset-0 flex items-center justify-center select-none text-[60vmin] leading-none"></div>

      <!-- Tile grid overlay -->
      <div id="tiles" class="absolute inset-0 grid grid-cols-4 grid-rows-4 gap-0"></div>
    </div>

    <!-- Status -->
    <div id="status" class="text-center mt-6 text-2xl font-semibold text-blue-700"></div>
    <p class="text-center text-lg text-gray-700 mt-2">
      Tip: Players call a coordinate like <span class="font-semibold">B3</span> ‚Äî click that exact tile, or use <span class="font-semibold">Reveal One</span>.
    </p>
  </div>

  <script>
    const ROWS = ["A","B","C","D"];
    const COLS = [1,2,3,4];

    const BANK = {
      animals: [
        {emoji:"ü¶í", name:"GIRAFFE"},
        {emoji:"ü¶ì", name:"ZEBRA"},
        {emoji:"üêò", name:"ELEPHANT"},
        {emoji:"ü¶ä", name:"FOX"},
        {emoji:"ü¶â", name:"OWL"},
        {emoji:"üêº", name:"PANDA"},
        {emoji:"ü¶ç", name:"GORILLA"},
        {emoji:"ü¶ò", name:"KANGAROO"},
        {emoji:"ü¶è", name:"RHINOCEROS"},
        {emoji:"ü¶î", name:"HEDGEHOG"}
      ],
      foods: [
        {emoji:"üçç", name:"PINEAPPLE"},
        {emoji:"ü•ê", name:"CROISSANT"},
        {emoji:"üçâ", name:"WATERMELON"},
        {emoji:"üçá", name:"GRAPES"},
        {emoji:"üßÄ", name:"CHEESE"},
        {emoji:"üçì", name:"STRAWBERRY"},
        {emoji:"üçî", name:"HAMBURGER"},
        {emoji:"üç£", name:"SUSHI"},
        {emoji:"ü•®", name:"PRETZEL"},
        {emoji:"üçÜ", name:"EGGPLANT"}
      ],
      objects: [
        {emoji:"‚õ∫", name:"TENT"},
        {emoji:"üö≤", name:"BICYCLE"},
        {emoji:"üï∞Ô∏è", name:"CLOCK"},
        {emoji:"üéí", name:"BACKPACK"},
        {emoji:"üßØ", name:"FIRE EXTINGUISHER"},
        {emoji:"üß≤", name:"MAGNET"},
        {emoji:"üß≥", name:"SUITCASE"},
        {emoji:"üî≠", name:"TELESCOPE"},
        {emoji:"üßµ", name:"THREAD"},
        {emoji:"üß±", name:"BRICK"}
      ]
    };

    let theme = "animals";
    let item = null;
    let covered = [];
    const totalTiles = ROWS.length * COLS.length;

    function randPick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function coordsFromIndex(i) {
      const r = Math.floor(i / COLS.length);
      const c = i % COLS.length;
      return ROWS[r] + (c + 1);
    }

    function setStatus(msg, color="text-blue-700") {
      const el = document.getElementById("status");
      el.className = `text-center mt-6 text-2xl font-semibold ${color}`;
      el.textContent = msg;
    }

    function renderPicture() {
      const pic = document.getElementById("picture");
      pic.textContent = item.emoji;
    }

    function renderTiles() {
      const wrap = document.getElementById("tiles");
      wrap.innerHTML = "";
      covered = Array(totalTiles).fill(true);
      for (let i = 0; i < totalTiles; i++) {
        const btn = document.createElement("button");
        btn.className = "tile bg-blue-700 hover:bg-blue-800 text-white border border-blue-900 flex items-center justify-center text-4xl md:text-5xl font-extrabold";
        btn.dataset.index = i;
        btn.innerHTML = coordsFromIndex(i);
        btn.addEventListener("click", () => revealTile(i, btn));
        wrap.appendChild(btn);
      }
      updateStatus();
    }

    function revealTile(i, btnEl=null) {
      if (!covered[i]) return;
      covered[i] = false;
      const btn = btnEl || document.querySelector(`.tile[data-index="${i}"]`);
      if (btn) btn.remove();
      updateStatus();
      if (covered.every(v => v === false)) {
        setStatus(`üéâ All tiles revealed ‚Äî Answer: ${item.name}`, "text-green-700");
      }
    }

    function revealOneRandom() {
      const remaining = covered.map((v,i)=>v?i:-1).filter(i=>i!==-1);
      if (!remaining.length) return;
      revealTile(randPick(remaining));
    }

    function revealAll() {
      for (let i = 0; i < totalTiles; i++) {
        if (covered[i]) revealTile(i);
      }
    }

    function updateStatus() {
      const left = covered.filter(Boolean).length;
      setStatus(`Tiles left: ${left} / ${totalTiles}`);
    }

    function newPicture() {
      item = randPick(BANK[theme]);
      renderPicture();
      renderTiles();
    }

    document.getElementById("theme").addEventListener("change", e => {
      theme = e.target.value;
      newPicture();
    });
    document.getElementById("newBtn").addEventListener("click", newPicture);
    document.getElementById("revealOne").addEventListener("click", revealOneRandom);
    document.getElementById("revealAll").addEventListener("click", revealAll);

    // Init
    newPicture();
  </script>
</body>
</html>
