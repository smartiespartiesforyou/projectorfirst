<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Pictionary â€” Piece by Piece Reveal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 min-h-screen">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-4xl font-bold text-blue-700 text-center mb-6">Pictionary â€” Reveal Mode</h1>

    <!-- Back to Apps -->
    <div class="mb-6 text-center">
      <a href="apps.html" class="px-6 py-3 bg-blue-600 hover:bg-blue-800 text-white text-xl rounded-2xl">â¬… Back to Apps</a>
    </div>

    <!-- Controls -->
    <div class="grid md:grid-cols-3 gap-4 items-end mb-6">
      <div>
        <label for="theme" class="block text-lg font-semibold text-blue-700 mb-2">Theme</label>
        <select id="theme"
                class="w-full text-xl p-3 border-2 border-blue-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="animals">Animals</option>
          <option value="foods">Foods</option>
          <option value="objects">Objects</option>
        </select>
      </div>
      <div>
        <label class="block text-lg font-semibold text-blue-700 mb-2">New Picture</label>
        <button id="newBtn"
                class="w-full bg-blue-600 hover:bg-blue-800 text-white text-xl py-3 px-6 rounded-2xl">
          New Picture
        </button>
      </div>
      <div class="flex md:justify-end gap-3">
        <button id="revealOne"
                class="flex-1 md:flex-none bg-green-600 hover:bg-green-800 text-white text-xl py-3 px-6 rounded-2xl">
          Reveal One
        </button>
        <button id="revealAll"
                class="flex-1 md:flex-none bg-amber-500 hover:bg-amber-600 text-white text-xl py-3 px-6 rounded-2xl">
          Reveal All
        </button>
      </div>
    </div>

    <!-- Board -->
    <div class="relative mx-auto aspect-square w-full max-w-3xl rounded-2xl border-4 border-blue-600 overflow-hidden bg-gray-100">
      <!-- Hidden picture (behind tiles) -->
      <div id="picture" class="absolute inset-0 flex items-center justify-center select-none text-[60vmin] leading-none z-0"></div>

      <!-- Tile grid overlay -->
      <div id="tiles" class="absolute inset-0 grid grid-cols-4 grid-rows-4 gap-0 z-10"></div>
    </div>

    <!-- Status -->
    <div id="status" class="text-center mt-6 text-2xl font-semibold text-blue-700"></div>
  </div>

  <script>
    // --- Picture bank ---
    const BANK = {
      animals: [
        {emoji:"ðŸ¦’", name:"GIRAFFE"},{emoji:"ðŸ¦“", name:"ZEBRA"},{emoji:"ðŸ˜", name:"ELEPHANT"},
        {emoji:"ðŸ¦Š", name:"FOX"},{emoji:"ðŸ¦‰", name:"OWL"},{emoji:"ðŸ¼", name:"PANDA"},
        {emoji:"ðŸ¦", name:"GORILLA"},{emoji:"ðŸ¦˜", name:"KANGAROO"},{emoji:"ðŸ¦", name:"RHINOCEROS"},
        {emoji:"ðŸ¦”", name:"HEDGEHOG"}
      ],
      foods: [
        {emoji:"ðŸ", name:"PINEAPPLE"},{emoji:"ðŸ¥", name:"CROISSANT"},{emoji:"ðŸ‰", name:"WATERMELON"},
        {emoji:"ðŸ‡", name:"GRAPES"},{emoji:"ðŸ§€", name:"CHEESE"},{emoji:"ðŸ“", name:"STRAWBERRY"},
        {emoji:"ðŸ”", name:"HAMBURGER"},{emoji:"ðŸ£", name:"SUSHI"},{emoji:"ðŸ¥¨", name:"PRETZEL"},
        {emoji:"ðŸ†", name:"EGGPLANT"}
      ],
      objects: [
        {emoji:"â›º", name:"TENT"},{emoji:"ðŸš²", name:"BICYCLE"},{emoji:"ðŸ•°ï¸", name:"CLOCK"},
        {emoji:"ðŸŽ’", name:"BACKPACK"},{emoji:"ðŸ§¯", name:"FIRE EXTINGUISHER"},{emoji:"ðŸ§²", name:"MAGNET"},
        {emoji:"ðŸ§³", name:"SUITCASE"},{emoji:"ðŸ”­", name:"TELESCOPE"},{emoji:"ðŸ§µ", name:"THREAD"},
        {emoji:"ðŸ§±", name:"BRICK"}
      ]
    };

    // --- State ---
    let theme = "animals";
    let item = null;
    const GRID_SIZE = 4;                 // 4x4
    const TOTAL = GRID_SIZE * GRID_SIZE; // 16

    // --- Helpers ---
    const pick = arr => arr[Math.floor(Math.random() * arr.length)];
    const setStatus = (msg, color="text-blue-700") => {
      const el = document.getElementById("status");
      el.className = `text-center mt-6 text-2xl font-semibold ${color}`;
      el.textContent = msg;
    };

    function renderPicture() {
      document.getElementById("picture").textContent = item.emoji;
    }

    function renderTiles() {
      const wrap = document.getElementById("tiles");
      wrap.innerHTML = "";

      // Create numbered tiles 1..16, each filling its grid cell
      for (let i = 0; i < TOTAL; i++) {
        const btn = document.createElement("button");
        btn.className = [
          "tile",
          "w-full h-full",                       // fill the grid cell (prevents layout weirdness)
          "bg-blue-700 hover:bg-blue-800 text-white",
          "border border-blue-900",
          "flex items-center justify-center",
          "select-none",
          "font-extrabold",
          "text-6xl md:text-7xl lg:text-8xl"     // BIG numbers
        ].join(" ");
        btn.textContent = i + 1;
        wrap.appendChild(btn);
      }

      setStatus(`Tiles left: ${TOTAL} / ${TOTAL}`);
    }

    function tilesLeft() {
      return document.querySelectorAll("#tiles .tile").length;
    }

    // Remove the specific tile clicked (no index math)
    document.getElementById("tiles").addEventListener("click", (e) => {
      const tile = e.target.closest(".tile");
      if (!tile) return;
      tile.remove();
      const left = tilesLeft();
      if (left === 0) {
        setStatus(`ðŸŽ‰ All tiles revealed â€” Answer: ${item.name}`, "text-green-700");
      } else {
        setStatus(`Tiles left: ${left} / ${TOTAL}`);
      }
    });

    function revealOneRandom() {
      const list = Array.from(document.querySelectorAll("#tiles .tile"));
      if (!list.length) return;
      pick(list).remove();
      const left = tilesLeft();
      setStatus(left ? `Tiles left: ${left} / ${TOTAL}` : `ðŸŽ‰ All tiles revealed â€” Answer: ${item.name}`, left ? "text-blue-700" : "text-green-700");
    }

    function revealAll() {
      document.querySelectorAll("#tiles .tile").forEach(t => t.remove());
      setStatus(`ðŸŽ‰ All tiles revealed â€” Answer: ${item.name}`, "text-green-700");
    }

    function newPicture() {
      item = pick(BANK[theme]);
      renderPicture();
      renderTiles();
    }

    // UI hooks
    document.getElementById("theme").addEventListener("change", e => {
      theme = e.target.value;
      newPicture();
    });
    document.getElementById("newBtn").addEventListener("click", newPicture);
    document.getElementById("revealOne").addEventListener("click", revealOneRandom);
    document.getElementById("revealAll").addEventListener("click", revealAll);

    // Init
    newPicture();
  </script>
</body>
</html>
